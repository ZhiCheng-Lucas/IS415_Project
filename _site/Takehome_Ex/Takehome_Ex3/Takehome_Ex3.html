<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Chong Zhi Cheng">
<meta name="dcterms.date" content="2024-10-27">

<title>IS415 - Prototyping Modules for Geospatial Analytics Shiny Application</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">IS415</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-hands-on-exercise" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Hands-on Exercise</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-hands-on-exercise">    
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex01/Hands-on_Ex01.html">
 <span class="dropdown-text">Hands-on Exercise 1: Introduction to Geospatial Analytics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex02/Hands-on_Ex02.html">
 <span class="dropdown-text">Hands-on Exercise 2: GeoVisualisation and Analytical Mapping</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html">
 <span class="dropdown-text">Hands-on Exercise 3: Spatial Point Patterns Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex04/Hands-on_Ex04.html">
 <span class="dropdown-text">Hands-on Exercise 4: Advanced Spatial Point Patterns Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex05/Hands-on_Ex05.html">
 <span class="dropdown-text">Hands-on Exercise 5: Spatial Weights and Applications</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex06/Hands-on_Ex06.html">
 <span class="dropdown-text">Hands-on Exercise 6: Measures of Global and Local Spatial Association</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex07/Hands-on_Ex07.html">
 <span class="dropdown-text">Hands-on Exercise 7: Shiny for Building Web-enabled Geospatial Analytics Application</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex08/Hands-on_Ex08.html">
 <span class="dropdown-text">Hands-on Exercise 8: Hierarchical Clustering for Multivariate Geographically Referenced Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex08/Hands-on_Ex08.html">
 <span class="dropdown-text">Hands-on Exercise 9: Spatially Constrained Cluster Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex10/Hands-on_Ex10.html">
 <span class="dropdown-text">Hands-on Exercise 10: Regression Modelling of Geographically Reference Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex10/Hands-on_Ex10.html">
 <span class="dropdown-text">Hands-on Exercise 11: Geographically Weighted Regression</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex12/Hands-on_Ex12.html">
 <span class="dropdown-text">Hands-on Exercise 12: Geographically Weighted Predictive Modelling</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-in-class-exercise" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">In-Class Exercise</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-in-class-exercise">    
        <li>
    <a class="dropdown-item" href="../../In-Class_Ex/In-Class_Ex01/In-Class_Ex01.html">
 <span class="dropdown-text">In-Class Exercise 1: Introduction to Geospatial Analytics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-Class_Ex/In-Class_Ex02/In-Class_Ex02.html">
 <span class="dropdown-text">In-Class Exercise 2: GeoVisualisation and Analytical Mapping</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-Class_Ex/In-Class_Ex03/In-Class_Ex03.html">
 <span class="dropdown-text">In-Class Exercise 3: Spatial Point Patterns Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-Class_Ex/In-Class_Ex04/In-Class_Ex04.html">
 <span class="dropdown-text">In-Class Exercise 4: Advanced Spatial Point Patterns Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-Class_Ex/In-Class_Ex05/In-Class_Ex05.html">
 <span class="dropdown-text">In-Class Exercise 5: Spatial Weights and Applications</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-Class_Ex/In-Class_Ex06/In-Class_Ex06.html">
 <span class="dropdown-text">In-Class Exercise 6: Measures of Global and Local Spatial Association</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-Class_Ex/In-Class_Ex07/In-Class_Ex07.html">
 <span class="dropdown-text">In-Class Exercise 7: Shiny for Building Web-enabled Geospatial Analytics Application</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-Class_Ex/In-Class_Ex08/In-Class_Ex08.html">
 <span class="dropdown-text">In-Class Exercise 8: Hierarchical Clustering for Multivariate Geographically Referenced Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-Class_Ex/In-Class_Ex09/In-Class_Ex09.html">
 <span class="dropdown-text">In-Class Exercise 9: Spatially Constrained Cluster Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-Class_Ex/In-Class_Ex10/In-Class_Ex10.html">
 <span class="dropdown-text">In-Class Exercise 10: Regression Modelling of Geographically Reference Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-Class_Ex/In-Class_Ex11/In-Class_Ex11.html">
 <span class="dropdown-text">In-Class Exercise 11: Geographically Weighted Regression</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-Class_Ex/In-Class_Ex12/In-Class_Ex12.html">
 <span class="dropdown-text">In-Class Exercise 12: Geographically Weighted Predictive Modelling</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-takehome-exercise" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Takehome Exercise</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-takehome-exercise">    
        <li>
    <a class="dropdown-item" href="../../Takehome_Ex/Takehome_Ex1/Takehome_Ex1.html">
 <span class="dropdown-text">Takehome Exercise 1: Unveiling the Spatial and Temporal Dynamics of Armed Conflict in Myanmar</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Takehome_Ex/Takehome_Ex2/Takehome_Ex2.html">
 <span class="dropdown-text">Takehome Exercise 2: Application of Geospatial Analysis Methods to Discover Thailand Drug Abuse at the Province Level</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Takehome_Ex/Takehome_Ex3/Takehome_Ex3.html">
 <span class="dropdown-text">Takehome Exercise 3: Spatial Distribution Analysis of Educational Facilities in Jakarta</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#spatial-distribution-analysis-of-educational-facilities-in-jakarta" id="toc-spatial-distribution-analysis-of-educational-facilities-in-jakarta" class="nav-link active" data-scroll-target="#spatial-distribution-analysis-of-educational-facilities-in-jakarta">Spatial Distribution Analysis of Educational Facilities in Jakarta:</a>
  <ul class="collapse">
  <li><a href="#a-comprehensive-study-of-accessibility-and-urban-planning" id="toc-a-comprehensive-study-of-accessibility-and-urban-planning" class="nav-link" data-scroll-target="#a-comprehensive-study-of-accessibility-and-urban-planning">A Comprehensive Study of Accessibility and Urban Planning</a></li>
  <li><a href="#significance-and-impact" id="toc-significance-and-impact" class="nav-link" data-scroll-target="#significance-and-impact">Significance and Impact</a></li>
  <li><a href="#research-objectives" id="toc-research-objectives" class="nav-link" data-scroll-target="#research-objectives">Research Objectives</a></li>
  </ul></li>
  <li><a href="#project-overview-and-scope" id="toc-project-overview-and-scope" class="nav-link" data-scroll-target="#project-overview-and-scope">Project Overview and Scope</a>
  <ul class="collapse">
  <li><a href="#project-goals-and-deliverable" id="toc-project-goals-and-deliverable" class="nav-link" data-scroll-target="#project-goals-and-deliverable">Project Goals and Deliverable</a></li>
  <li><a href="#collaborative-framework" id="toc-collaborative-framework" class="nav-link" data-scroll-target="#collaborative-framework">Collaborative Framework</a>
  <ul class="collapse">
  <li><a href="#joint-research-and-foundation-team-effort" id="toc-joint-research-and-foundation-team-effort" class="nav-link" data-scroll-target="#joint-research-and-foundation-team-effort">Joint Research and Foundation (Team Effort)</a></li>
  </ul></li>
  <li><a href="#scope-of-current-report" id="toc-scope-of-current-report" class="nav-link" data-scroll-target="#scope-of-current-report">Scope of Current Report</a></li>
  </ul></li>
  <li><a href="#data-sources-and-educational-context" id="toc-data-sources-and-educational-context" class="nav-link" data-scroll-target="#data-sources-and-educational-context">Data Sources and Educational Context</a>
  <ul class="collapse">
  <li><a href="#data-sources" id="toc-data-sources" class="nav-link" data-scroll-target="#data-sources">Data Sources</a></li>
  <li><a href="#indonesian-education-system-context" id="toc-indonesian-education-system-context" class="nav-link" data-scroll-target="#indonesian-education-system-context">Indonesian Education System Context</a>
  <ul class="collapse">
  <li><a href="#primary-education" id="toc-primary-education" class="nav-link" data-scroll-target="#primary-education">Primary Education</a></li>
  <li><a href="#secondary-education" id="toc-secondary-education" class="nav-link" data-scroll-target="#secondary-education">Secondary Education</a></li>
  <li><a href="#upper-secondary-education" id="toc-upper-secondary-education" class="nav-link" data-scroll-target="#upper-secondary-education">Upper Secondary Education</a></li>
  <li><a href="#special-education" id="toc-special-education" class="nav-link" data-scroll-target="#special-education">Special Education</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#data-loading-and-processing" id="toc-data-loading-and-processing" class="nav-link" data-scroll-target="#data-loading-and-processing">Data Loading and Processing</a></li>
  <li><a href="#exploratory-data-analysis-at-the-provincial-level" id="toc-exploratory-data-analysis-at-the-provincial-level" class="nav-link" data-scroll-target="#exploratory-data-analysis-at-the-provincial-level">Exploratory Data Analysis at the Provincial Level</a>
  <ul class="collapse">
  <li><a href="#overall-distribution-of-schools" id="toc-overall-distribution-of-schools" class="nav-link" data-scroll-target="#overall-distribution-of-schools">Overall Distribution of Schools</a></li>
  <li><a href="#distribution-of-school-levels" id="toc-distribution-of-school-levels" class="nav-link" data-scroll-target="#distribution-of-school-levels">Distribution of School Levels</a></li>
  <li><a href="#school-density-across-jakarta" id="toc-school-density-across-jakarta" class="nav-link" data-scroll-target="#school-density-across-jakarta">School Density Across Jakarta</a></li>
  <li><a href="#population-density-in-jakarta" id="toc-population-density-in-jakarta" class="nav-link" data-scroll-target="#population-density-in-jakarta">Population Density in Jakarta</a>
  <ul class="collapse">
  <li><a href="#key-insights" id="toc-key-insights" class="nav-link" data-scroll-target="#key-insights">Key Insights</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#kernel-density-estimation-analysis-at-provincial-level" id="toc-kernel-density-estimation-analysis-at-provincial-level" class="nav-link" data-scroll-target="#kernel-density-estimation-analysis-at-provincial-level">Kernel Density Estimation Analysis at Provincial Level</a></li>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"></a>
  <ul class="collapse">
  <li><a href="#distribution-patterns" id="toc-distribution-patterns" class="nav-link" data-scroll-target="#distribution-patterns">Distribution Patterns</a></li>
  <li><a href="#numbers-and-coverage" id="toc-numbers-and-coverage" class="nav-link" data-scroll-target="#numbers-and-coverage">Numbers and Coverage</a></li>
  <li><a href="#section-1" id="toc-section-1" class="nav-link" data-scroll-target="#section-1"></a></li>
  </ul></li>
  <li><a href="#exploratory-data-analysis-at-the-city-level" id="toc-exploratory-data-analysis-at-the-city-level" class="nav-link" data-scroll-target="#exploratory-data-analysis-at-the-city-level">Exploratory Data Analysis at the City Level</a>
  <ul class="collapse">
  <li><a href="#school-distribution-by-city" id="toc-school-distribution-by-city" class="nav-link" data-scroll-target="#school-distribution-by-city">School Distribution by City</a></li>
  <li><a href="#public-school-ratio-by-city" id="toc-public-school-ratio-by-city" class="nav-link" data-scroll-target="#public-school-ratio-by-city">Public School Ratio by City</a>
  <ul class="collapse">
  <li><a href="#public-school-ratio-analysis---key-findings" id="toc-public-school-ratio-analysis---key-findings" class="nav-link" data-scroll-target="#public-school-ratio-analysis---key-findings">Public School Ratio Analysis - Key Findings</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#kernel-density-estimation-analysis-at-city-level" id="toc-kernel-density-estimation-analysis-at-city-level" class="nav-link" data-scroll-target="#kernel-density-estimation-analysis-at-city-level">Kernel Density Estimation Analysis at City Level</a>
  <ul class="collapse">
  <li><a href="#section-2" id="toc-section-2" class="nav-link" data-scroll-target="#section-2"></a></li>
  <li><a href="#key-findings---relative-density-analysis" id="toc-key-findings---relative-density-analysis" class="nav-link" data-scroll-target="#key-findings---relative-density-analysis">Key Findings - Relative Density Analysis</a>
  <ul class="collapse">
  <li><a href="#school-level-patterns" id="toc-school-level-patterns" class="nav-link" data-scroll-target="#school-level-patterns">School Level Patterns</a></li>
  <li><a href="#overall-observations" id="toc-overall-observations" class="nav-link" data-scroll-target="#overall-observations">Overall Observations</a></li>
  </ul></li>
  <li><a href="#section-3" id="toc-section-3" class="nav-link" data-scroll-target="#section-3"></a></li>
  </ul></li>
  <li><a href="#lisa-analysis" id="toc-lisa-analysis" class="nav-link" data-scroll-target="#lisa-analysis">LISA Analysis</a>
  <ul class="collapse">
  <li><a href="#key-findings-from-spatial-analysis" id="toc-key-findings-from-spatial-analysis" class="nav-link" data-scroll-target="#key-findings-from-spatial-analysis">Key Findings from Spatial Analysis</a></li>
  <li><a href="#cluster-patterns" id="toc-cluster-patterns" class="nav-link" data-scroll-target="#cluster-patterns">Cluster Patterns</a></li>
  <li><a href="#correlation-analysis" id="toc-correlation-analysis" class="nav-link" data-scroll-target="#correlation-analysis">Correlation Analysis</a></li>
  </ul></li>
  <li><a href="#getis-ord-g" id="toc-getis-ord-g" class="nav-link" data-scroll-target="#getis-ord-g">Getis-Ord G*</a>
  <ul class="collapse">
  <li><a href="#section-4" id="toc-section-4" class="nav-link" data-scroll-target="#section-4"></a></li>
  <li><a href="#analysis-of-school-distribution-patterns-in-jakarta" id="toc-analysis-of-school-distribution-patterns-in-jakarta" class="nav-link" data-scroll-target="#analysis-of-school-distribution-patterns-in-jakarta">Analysis of School Distribution Patterns in Jakarta</a>
  <ul class="collapse">
  <li><a href="#junior-high-senior-high-school-patterns" id="toc-junior-high-senior-high-school-patterns" class="nav-link" data-scroll-target="#junior-high-senior-high-school-patterns">Junior High &amp; Senior High School Patterns</a></li>
  <li><a href="#special-education-vs-regular-schools" id="toc-special-education-vs-regular-schools" class="nav-link" data-scroll-target="#special-education-vs-regular-schools">Special Education vs Regular Schools</a></li>
  <li><a href="#public-school-ratio-distribution" id="toc-public-school-ratio-distribution" class="nav-link" data-scroll-target="#public-school-ratio-distribution">Public School Ratio Distribution</a></li>
  <li><a href="#transition-zones" id="toc-transition-zones" class="nav-link" data-scroll-target="#transition-zones">Transition Zones</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#storyboard-jakarta-schools-spatial-analysis-dashboard" id="toc-storyboard-jakarta-schools-spatial-analysis-dashboard" class="nav-link" data-scroll-target="#storyboard-jakarta-schools-spatial-analysis-dashboard">Storyboard: Jakarta Schools Spatial Analysis Dashboard</a></li>
  <li><a href="#ui-design" id="toc-ui-design" class="nav-link" data-scroll-target="#ui-design">UI Design</a>
  <ul class="collapse">
  <li><a href="#design-philosophy-objectives" id="toc-design-philosophy-objectives" class="nav-link" data-scroll-target="#design-philosophy-objectives">Design Philosophy &amp; Objectives</a>
  <ul class="collapse">
  <li><a href="#design-philosophy" id="toc-design-philosophy" class="nav-link" data-scroll-target="#design-philosophy">Design Philosophy</a></li>
  <li><a href="#core-design-objectives" id="toc-core-design-objectives" class="nav-link" data-scroll-target="#core-design-objectives">Core Design Objectives</a></li>
  <li><a href="#interactive-components-controls" id="toc-interactive-components-controls" class="nav-link" data-scroll-target="#interactive-components-controls">Interactive Components &amp; Controls</a></li>
  </ul></li>
  <li><a href="#layout-architecture---mock-up-1" id="toc-layout-architecture---mock-up-1" class="nav-link" data-scroll-target="#layout-architecture---mock-up-1">Layout Architecture - Mock up 1</a>
  <ul class="collapse">
  <li><a href="#spatial-organization" id="toc-spatial-organization" class="nav-link" data-scroll-target="#spatial-organization">Spatial Organization</a></li>
  <li><a href="#control-panel-organization" id="toc-control-panel-organization" class="nav-link" data-scroll-target="#control-panel-organization">Control Panel Organization</a></li>
  <li><a href="#visualization-organization" id="toc-visualization-organization" class="nav-link" data-scroll-target="#visualization-organization">Visualization Organization</a></li>
  </ul></li>
  <li><a href="#layout-architecture---mock-up-2" id="toc-layout-architecture---mock-up-2" class="nav-link" data-scroll-target="#layout-architecture---mock-up-2">Layout Architecture - Mock up 2</a>
  <ul class="collapse">
  <li><a href="#design-evolution-rationale" id="toc-design-evolution-rationale" class="nav-link" data-scroll-target="#design-evolution-rationale">Design Evolution Rationale</a></li>
  <li><a href="#proposed-layout-structure" id="toc-proposed-layout-structure" class="nav-link" data-scroll-target="#proposed-layout-structure">Proposed Layout Structure</a></li>
  <li><a href="#section-5" id="toc-section-5" class="nav-link" data-scroll-target="#section-5"><img src="Mockup_2_diagram.PNG" class="img-fluid"></a></li>
  <li><a href="#design-limitations-and-future-considerations" id="toc-design-limitations-and-future-considerations" class="nav-link" data-scroll-target="#design-limitations-and-future-considerations">Design Limitations and Future Considerations</a></li>
  </ul></li>
  <li><a href="#layout-architecture---mock-up-3" id="toc-layout-architecture---mock-up-3" class="nav-link" data-scroll-target="#layout-architecture---mock-up-3">Layout Architecture - Mock up 3</a>
  <ul class="collapse">
  <li><a href="#design-evolution-rationale-1" id="toc-design-evolution-rationale-1" class="nav-link" data-scroll-target="#design-evolution-rationale-1">Design Evolution Rationale</a></li>
  <li><a href="#key-innovation-repositioned-summary-panel" id="toc-key-innovation-repositioned-summary-panel" class="nav-link" data-scroll-target="#key-innovation-repositioned-summary-panel">Key Innovation: Repositioned Summary Panel</a></li>
  <li><a href="#proposed-layout-structure-1" id="toc-proposed-layout-structure-1" class="nav-link" data-scroll-target="#proposed-layout-structure-1">Proposed Layout Structure</a></li>
  <li><a href="#component-modifications" id="toc-component-modifications" class="nav-link" data-scroll-target="#component-modifications">Component Modifications</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Prototyping Modules for Geospatial Analytics Shiny Application</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Chong Zhi Cheng </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 27, 2024</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">November 3, 2024</p>
    </div>
  </div>
    
  </div>
  


</header>


<section id="spatial-distribution-analysis-of-educational-facilities-in-jakarta" class="level1">
<h1>Spatial Distribution Analysis of Educational Facilities in Jakarta:</h1>
<section id="a-comprehensive-study-of-accessibility-and-urban-planning" class="level2">
<h2 class="anchored" data-anchor-id="a-comprehensive-study-of-accessibility-and-urban-planning">A Comprehensive Study of Accessibility and Urban Planning</h2>
<p>The spatial distribution of schools in Jakarta, Indonesia’s capital city, represents a critical aspect of educational accessibility and urban planning. As one of the world’s most densely populated metropolitan areas, Jakarta’s educational infrastructure directly impacts the lives of millions of students and their families. Understanding the spatial patterns, clustering, and relationships between school locations and socioeconomic factors is crucial for informed policy-making and urban development strategies.</p>
</section>
<section id="significance-and-impact" class="level2">
<h2 class="anchored" data-anchor-id="significance-and-impact">Significance and Impact</h2>
<p>Equitable access to education is fundamental to social mobility and economic development, particularly in rapidly growing urban centers like Jakarta. Several factors make this analysis particularly crucial:</p>
<ul>
<li><p><strong>Educational Equity</strong>: Spatial disparities in school distribution can perpetuate or exacerbate socioeconomic inequalities, as access to quality education often correlates with neighborhood demographics and income levels.</p></li>
<li><p><strong>Urban Planning Challenges</strong>: Jakarta’s rapid urbanization and population growth create unique challenges for educational infrastructure planning, requiring evidence-based approaches to resource allocation.</p></li>
<li><p><strong>Economic Implications</strong>: School accessibility directly affects property values, population movement patterns, and local economic development, making it a key consideration for urban development strategies.</p></li>
<li><p><strong>Transportation and Infrastructure</strong>: Understanding school distribution patterns helps optimize transportation networks and reduce traffic congestion, a significant issue in Jakarta’s urban landscape.</p></li>
<li><p><strong>Policy Development</strong>: Results from this analysis can inform evidence-based policy decisions about new school construction, resource allocation, and educational zoning regulations.</p></li>
</ul>
</section>
<section id="research-objectives" class="level2">
<h2 class="anchored" data-anchor-id="research-objectives">Research Objectives</h2>
<p>Our research objectives encompass three primary areas of investigation:</p>
<ol type="1">
<li><strong>Spatial Point Patterns Analysis for School Locations</strong></li>
<li><strong>LISA and HCSA Analysis of Schools</strong></li>
<li><strong>Geographically Weighted Regression Analysis</strong></li>
</ol>
</section>
</section>
<section id="project-overview-and-scope" class="level1">
<h1>Project Overview and Scope</h1>
<section id="project-goals-and-deliverable" class="level2">
<h2 class="anchored" data-anchor-id="project-goals-and-deliverable">Project Goals and Deliverable</h2>
<p>The primary objective of this research is to conduct a comprehensive spatial analysis of Jakarta’s educational infrastructure, with findings ultimately presented through an interactive Shiny application. This web-based platform will allow stakeholders to explore and interact with our analytical results, making complex spatial patterns and relationships accessible to policymakers, educators, and the public.</p>
</section>
<section id="collaborative-framework" class="level2">
<h2 class="anchored" data-anchor-id="collaborative-framework">Collaborative Framework</h2>
<p>This project represents a collaborative effort among three students, with work structured in the following phases:</p>
<section id="joint-research-and-foundation-team-effort" class="level3">
<h3 class="anchored" data-anchor-id="joint-research-and-foundation-team-effort">Joint Research and Foundation (Team Effort)</h3>
<ul>
<li><p>Initial research and literature review</p></li>
<li><p>Data acquisition and preprocessing</p></li>
<li><p>Exploratory Data Analysis (EDA)</p></li>
<li><p>Problem formulation and methodology selection</p></li>
</ul>
<p>The core analytical work has been distributed among team members, with each focusing on a specific aspect of spatial analysis:</p>
<ol type="1">
<li><strong>Spatial Point Patterns Analysis for School Locations</strong>
<ul>
<li><a href="https://is415-gaa-baojieyeo.netlify.app/" class="uri">https://is415-gaa-baojieyeo.netlify.app/</a></li>
</ul></li>
<li><strong>LISA and HCSA Analysis of Schools</strong>
<ul>
<li><em>Current Report Focus</em></li>
<li>The current latest interface design implementation can be accessed via the following link: <a href="https://zcchong415.shinyapps.io/Takehome_Ex3/" class="uri">https://zcchong415.shinyapps.io/Takehome_Ex3/</a></li>
</ul></li>
<li><strong>Geographically Weighted Regression Analysis</strong>
<ul>
<li><a href="https://hxyap-is415-geospatial-workbook.netlify.app/" class="uri">https://hxyap-is415-geospatial-workbook.netlify.app/</a></li>
</ul></li>
</ol>
</section>
</section>
<section id="scope-of-current-report" class="level2">
<h2 class="anchored" data-anchor-id="scope-of-current-report">Scope of Current Report</h2>
<p>This report specifically details the <strong>LISA and HCSA Analysis of Schools</strong> component of the larger project. While this document can be read independently, it is designed to be part of a larger analytical narrative. Readers are encouraged to review all three reports for a complete understanding of Jakarta’s educational spatial dynamics. The findings presented here complement and intersect with the other analytical streams.</p>
</section>
</section>
<section id="data-sources-and-educational-context" class="level1">
<h1>Data Sources and Educational Context</h1>
<section id="data-sources" class="level2">
<h2 class="anchored" data-anchor-id="data-sources">Data Sources</h2>
<p>This study utilizes three primary datasets:</p>
<ol type="1">
<li><strong>School Location Dataset</strong> (<code>complete_data.csv</code>)
<ul>
<li>Source: Kaggle - Indonesia School Dataset with Province Data</li>
<li>URL: <a href="https://www.kaggle.com/datasets/marchotridyo/indonesia-school-dataset-with-province-data" class="uri">https://www.kaggle.com/datasets/marchotridyo/indonesia-school-dataset-with-province-data</a></li>
<li>Content: Comprehensive information about schools including:
<ul>
<li>Geographic coordinates</li>
<li>School type classification</li>
<li>Operational status</li>
<li>Administrative information</li>
</ul></li>
</ul></li>
<li><strong>Administrative Boundaries</strong> (<code>geoBoundaries-IDN-ADM2_simplified</code>)
<ul>
<li>Source: Humanitarian Data Exchange (HDX)</li>
<li>URL: <a href="https://data.humdata.org/dataset/geoboundaries-admin-boundaries-for-indonesia" class="uri">https://data.humdata.org/dataset/geoboundaries-admin-boundaries-for-indonesia</a></li>
<li>Content: Simplified boundary data for:
<ul>
<li>Administrative level 2 (ADM2) regions</li>
<li>Provincial divisions</li>
<li>District demarcations</li>
</ul></li>
</ul></li>
<li><strong>Village-Level Boundaries</strong> (<code>BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA</code>)
<ul>
<li>Source: Indonesia Geospatial Portal</li>
<li>URL: <a href="https://www.indonesia-geospasial.com" class="uri">https://www.indonesia-geospasial.com</a></li>
<li>Content: Detailed boundary data for:
<ul>
<li><p>Village (desa) level administrative units</p></li>
<li><p>Jakarta metropolitan area</p></li>
</ul></li>
</ul></li>
</ol>
</section>
<section id="indonesian-education-system-context" class="level2">
<h2 class="anchored" data-anchor-id="indonesian-education-system-context">Indonesian Education System Context</h2>
<p>The Indonesian education system comprises several distinct school types, each serving specific educational needs and age groups:</p>
<section id="primary-education" class="level3">
<h3 class="anchored" data-anchor-id="primary-education">Primary Education</h3>
<ul>
<li><strong>SD (Sekolah Dasar)</strong>
<ul>
<li>Elementary school for ages 6-12</li>
<li>Grades 1-6</li>
<li>Mandatory basic education</li>
<li>Core subjects: mathematics, science, language, social studies</li>
</ul></li>
<li><strong>SDLB (Sekolah Dasar Luar Biasa)</strong>
<ul>
<li>Special needs elementary school</li>
<li>Adapted curriculum for disabled students</li>
<li>Equivalent to SD grades 1-6</li>
<li>Individualized education programs</li>
</ul></li>
</ul>
</section>
<section id="secondary-education" class="level3">
<h3 class="anchored" data-anchor-id="secondary-education">Secondary Education</h3>
<ul>
<li><strong>SMP (Sekolah Menengah Pertama)</strong>
<ul>
<li>Junior high school for ages 12-15</li>
<li>Grades 7-9</li>
<li>Advanced curriculum building on SD foundation</li>
</ul></li>
<li><strong>SMPLB (Sekolah Menengah Pertama Luar Biasa)</strong>
<ul>
<li>Special needs junior high school</li>
<li>Modified curriculum for disabled students</li>
<li>Equivalent to SMP grades 7-9</li>
</ul></li>
</ul>
</section>
<section id="upper-secondary-education" class="level3">
<h3 class="anchored" data-anchor-id="upper-secondary-education">Upper Secondary Education</h3>
<ul>
<li><strong>SMA (Sekolah Menengah Atas)</strong>
<ul>
<li>Academic senior high school for ages 15-18</li>
<li>Grades 10-12</li>
<li>Streams: Natural Sciences (IPA), Social Sciences (IPS), Language</li>
<li>University preparation focus</li>
</ul></li>
<li><strong>SMK (Sekolah Menengah Kejuruan)</strong>
<ul>
<li>Vocational high school</li>
<li>Ages 15-18</li>
<li>Career-oriented curriculum</li>
<li>Direct workforce preparation</li>
</ul></li>
</ul>
</section>
<section id="special-education" class="level3">
<h3 class="anchored" data-anchor-id="special-education">Special Education</h3>
<ul>
<li><p><strong>SMLB (Sekolah Menengah Luar Biasa)</strong></p>
<ul>
<li>Special needs senior high school</li>
<li>Equivalent to SMA/SMK grades 10-12</li>
<li>Customized curriculum</li>
</ul></li>
<li><p><strong>SLB (Sekolah Luar Biasa)</strong></p>
<ul>
<li>Comprehensive special education</li>
<li>Covers all education levels</li>
<li>Specialized support services</li>
<li>Individualized learning programs</li>
</ul></li>
</ul>
</section>
</section>
</section>
<section id="data-loading-and-processing" class="level1">
<h1>Data Loading and Processing</h1>
<p>The foundation of our spatial analysis rests on the careful preparation and integration of multiple datasets that capture Jakarta’s educational landscape. This section details the systematic process of loading, cleaning, and standardizing three key data sources:</p>
<ol type="1">
<li>A comprehensive database of Indonesian schools from Kaggle</li>
<li>Administrative boundary data at the city level (ADM2)</li>
<li>Detailed village-level (kelurahan) boundary data</li>
</ol>
<p>Our primary objectives in this data processing phase were to:</p>
<ul>
<li><p>Isolate and clean Jakarta’s school data while excluding the Thousand Islands region</p></li>
<li><p>Standardize administrative boundary information across different geographic scales</p></li>
<li><p>Ensure consistent naming conventions across all datasets</p></li>
<li><p>Establish proper spatial relationships through coordinate system alignment</p></li>
</ul>
<p>Particular attention was paid to creating meaningful categorical variables for school types and levels, while also incorporating crucial demographic information at the village level. This processed data provides the structured foundation necessary for our subsequent LISA and HCSA analyses, enabling us to meaningfully investigate spatial patterns in Jakarta’s educational infrastructure.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load required packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  sf,              <span class="co"># For spatial data handling</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  tidyverse,       <span class="co"># Data manipulation and visualization</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  knitr,           <span class="co"># For report generation</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  viridis,         <span class="co"># Color palettes</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  patchwork,       <span class="co"># Combine multiple plots</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  gridExtra,       <span class="co"># Arrange multiple plots</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  kableExtra,      <span class="co"># Enhanced tables</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  sfdep,           <span class="co"># Spatial dependence functions</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  tmap,            <span class="co"># Thematic mapping</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  tmaptools,       <span class="co"># Additional mapping tools</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  scales,          <span class="co"># Scale functions for visualization</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  spdep,           <span class="co"># Spatial dependence testing</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  ggrepel,         <span class="co"># Text and label repulsion</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  spatstat,        <span class="co"># Point pattern analysis</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  GWmodel,         <span class="co"># Geographically weighted models</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  gtsummary,       <span class="co"># Summary statistics</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>  olsrr,           <span class="co"># OLS regression</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>  ClustGeo         <span class="co"># Geographical clustering</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load raw school data from Kaggle dataset</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>indo_schools_kaggle <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/aspatial/complete_data.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Process Jakarta schools data</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>jakarta_schools <span class="ot">&lt;-</span> indo_schools_kaggle <span class="sc">%&gt;%</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Filter for Jakarta province, excluding Thousand Islands</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(province_name <span class="sc">==</span> <span class="st">"DKI JAKARTA"</span>,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>         city_name <span class="sc">!=</span> <span class="st">"Kab. Kepulauan Seribu"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Remove entries with missing coordinates</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(long) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(lat)) <span class="sc">%&gt;%</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Convert to spatial features (sf) object</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_as_sf</span>(<span class="at">coords =</span> <span class="fu">c</span>(<span class="st">"long"</span>, <span class="st">"lat"</span>), <span class="at">crs =</span> <span class="dv">4326</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create new categorical variables for school level and type</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">school_level =</span> <span class="fu">case_when</span>(</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>        stage <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"SD"</span>, <span class="st">"SDLB"</span>) <span class="sc">~</span> <span class="st">"Elementary"</span>,</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>        stage <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"SMP"</span>, <span class="st">"SMPLB"</span>) <span class="sc">~</span> <span class="st">"Junior High"</span>,</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>        stage <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"SMA"</span>, <span class="st">"SMK"</span>, <span class="st">"SMLB"</span>) <span class="sc">~</span> <span class="st">"Senior High"</span>,</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>        <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Special Education"</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">school_type =</span> <span class="fu">if_else</span>(status <span class="sc">==</span> <span class="st">"N"</span>, <span class="st">"Public"</span>, <span class="st">"Private"</span>)</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load and filter administrative boundary data (ADM2 level)</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>adm2 <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"data/geospatial"</span>, <span class="at">layer =</span> <span class="st">"geoBoundaries-IDN-ADM2_simplified"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Select only Jakarta's five administrative cities</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(shapeName <span class="sc">%in%</span> <span class="fu">c</span>(</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Kota Jakarta Barat"</span>, <span class="st">"Kota Jakarta Pusat"</span>,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Kota Jakarta Selatan"</span>, <span class="st">"Kota Jakarta Timur"</span>,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Kota Jakarta Utara"</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Reading layer `geoBoundaries-IDN-ADM2_simplified' from data source 
  `C:\zcchong\IS415\Takehome_Ex\Takehome_Ex3\data\geospatial' 
  using driver `ESRI Shapefile'
Simple feature collection with 519 features and 5 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: 95.01115 ymin: -11.00762 xmax: 141.0194 ymax: 6.07693
Geodetic CRS:  WGS 84</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load and process detailed village-level boundary data</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>batas <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"data/geospatial"</span>, <span class="at">layer =</span> <span class="st">"BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA"</span>)  <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Select relevant columns and rename for clarity</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(OBJECT_ID, PROVINSI, KAB_KOTA, KECAMATAN, DESA_KELUR, </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>         JUMLAH_PEN, JUMLAH_KK, LUAS_WILAY, KEPADATAN, geometry) <span class="sc">%&gt;%</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">province =</span> PROVINSI,</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">city =</span> KAB_KOTA,</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">district =</span> KECAMATAN,</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">subdistrict =</span> DESA_KELUR,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">population =</span> JUMLAH_PEN,</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">total_families =</span> JUMLAH_KK,</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">area_size =</span> LUAS_WILAY,</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">popn_density =</span> KEPADATAN</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove Thousand Islands and missing values</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(city) <span class="sc">&amp;</span> city <span class="sc">!=</span> <span class="st">"KEPULAUAN SERIBU"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Standardize city names</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">city =</span> <span class="fu">case_when</span>(</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>      city <span class="sc">==</span> <span class="st">"JAKARTA BARAT"</span> <span class="sc">~</span> <span class="st">"Kota Jakarta Barat"</span>,</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>      city <span class="sc">==</span> <span class="st">"JAKARTA PUSAT"</span> <span class="sc">~</span> <span class="st">"Kota Jakarta Pusat"</span>,</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>      city <span class="sc">==</span> <span class="st">"JAKARTA SELATAN"</span> <span class="sc">~</span> <span class="st">"Kota Jakarta Selatan"</span>,</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>      city <span class="sc">==</span> <span class="st">"JAKARTA TIMUR"</span> <span class="sc">~</span> <span class="st">"Kota Jakarta Timur"</span>,</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>      city <span class="sc">==</span> <span class="st">"JAKARTA UTARA"</span> <span class="sc">~</span> <span class="st">"Kota Jakarta Utara"</span>,</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> city</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>    ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Reading layer `BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA' from data source 
  `C:\zcchong\IS415\Takehome_Ex\Takehome_Ex3\data\geospatial' 
  using driver `ESRI Shapefile'
Simple feature collection with 269 features and 161 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: 106.3831 ymin: -6.370815 xmax: 106.9728 ymax: -5.184322
Geodetic CRS:  WGS 84</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create district name mapping for standardization</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>district_mapping <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"TAMAN SARI"</span> <span class="ot">=</span> <span class="st">"Kec. Taman Sari"</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"KEMAYORAN"</span> <span class="ot">=</span> <span class="st">"Kec. Kemayoran"</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"SAWAH BESAR"</span> <span class="ot">=</span> <span class="st">"Kec. Sawah Besar"</span>,</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"GAMBIR"</span> <span class="ot">=</span> <span class="st">"Kec. Gambir"</span>,</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"SENEN"</span> <span class="ot">=</span> <span class="st">"Kec. Senen"</span>,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CEMPAKA PUTIH"</span> <span class="ot">=</span> <span class="st">"Kec. Cempaka Putih"</span>,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"MENTENG"</span> <span class="ot">=</span> <span class="st">"Kec. Menteng"</span>,</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"TANAH ABANG"</span> <span class="ot">=</span> <span class="st">"Kec. Tanah Abang"</span>,</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"JOHAR BARU"</span> <span class="ot">=</span> <span class="st">"Kec. Johar Baru"</span>,</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"KOJA"</span> <span class="ot">=</span> <span class="st">"Kec. Koja"</span>,</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"PENJARINGAN"</span> <span class="ot">=</span> <span class="st">"Kec. Penjaringan"</span>,</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"TANJUNG PRIOK"</span> <span class="ot">=</span> <span class="st">"Kec. Tanjung Priok"</span>,</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CILINCING"</span> <span class="ot">=</span> <span class="st">"Kec. Cilincing"</span>,</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"GROGOL PETAMBURAN"</span> <span class="ot">=</span> <span class="st">"Kec. Grogol Petamburan"</span>,</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"PADEMANGAN"</span> <span class="ot">=</span> <span class="st">"Kec. Pademangan"</span>,</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"KELAPA GADING"</span> <span class="ot">=</span> <span class="st">"Kec. Kelapa Gading"</span>,</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CENGKARENG"</span> <span class="ot">=</span> <span class="st">"Kec. Cengkareng"</span>,</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">"TAMBORA"</span> <span class="ot">=</span> <span class="st">"Kec. Tambora"</span>,</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">"KEBON JERUK"</span> <span class="ot">=</span> <span class="st">"Kec. Kebon Jeruk"</span>,</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">"KALIDERES"</span> <span class="ot">=</span> <span class="st">"Kec. Kali Deres"</span>,</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">"PAL MERAH"</span> <span class="ot">=</span> <span class="st">"Kec. Palmerah"</span>,</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">"JATINEGARA"</span> <span class="ot">=</span> <span class="st">"Kec. Jatinegara"</span>,</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">"KEMBANGAN"</span> <span class="ot">=</span> <span class="st">"Kec. Kembangan"</span>,</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>    <span class="st">"TEBET"</span> <span class="ot">=</span> <span class="st">"Kec. Tebet"</span>,</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>    <span class="st">"SETIABUDI"</span> <span class="ot">=</span> <span class="st">"Kec. Setia Budi"</span>,</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>    <span class="st">"MAMPANG PRAPATAN"</span> <span class="ot">=</span> <span class="st">"Kec. Mampang Prapatan"</span>,</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>    <span class="st">"PASAR MINGGU"</span> <span class="ot">=</span> <span class="st">"Kec. Pasar Minggu"</span>,</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>    <span class="st">"KEBAYORAN LAMA"</span> <span class="ot">=</span> <span class="st">"Kec. Kebayoran Lama"</span>,</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>    <span class="st">"KEBAYORAN BARU"</span> <span class="ot">=</span> <span class="st">"Kec. Kebayoran Baru"</span>,</span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CILANDAK"</span> <span class="ot">=</span> <span class="st">"Kec. Cilandak"</span>,</span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">"PESANGGRAHAN"</span> <span class="ot">=</span> <span class="st">"Kec. Pesanggrahan"</span>,</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>    <span class="st">"PANCORAN"</span> <span class="ot">=</span> <span class="st">"Kec. Pancoran"</span>,</span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>    <span class="st">"JAGAKARSA"</span> <span class="ot">=</span> <span class="st">"Kec. Jagakarsa"</span>,</span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>    <span class="st">"MATRAMAN"</span> <span class="ot">=</span> <span class="st">"Kec. Matraman"</span>,</span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>    <span class="st">"PULOGADUNG"</span> <span class="ot">=</span> <span class="st">"Kec. Pulo Gadung"</span>,</span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>    <span class="st">"KRAMATJATI"</span> <span class="ot">=</span> <span class="st">"Kec. Kramat Jati"</span>,</span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>    <span class="st">"PASAR REBO"</span> <span class="ot">=</span> <span class="st">"Kec. Pasar Rebo"</span>,</span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>    <span class="st">"DUREN SAWIT"</span> <span class="ot">=</span> <span class="st">"Kec. Duren Sawit"</span>,</span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>    <span class="st">"MAKASAR"</span> <span class="ot">=</span> <span class="st">"Kec. Makasar"</span>,</span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CIRACAS"</span> <span class="ot">=</span> <span class="st">"Kec. Ciracas"</span>,</span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CIPAYUNG"</span> <span class="ot">=</span> <span class="st">"Kec. Cipayung"</span>,</span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CAKUNG"</span> <span class="ot">=</span> <span class="st">"Kec. Cakung"</span></span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply district name standardization</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>batas <span class="ot">&lt;-</span> batas <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">district =</span> district_mapping[district])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="exploratory-data-analysis-at-the-provincial-level" class="level1">
<h1>Exploratory Data Analysis at the Provincial Level</h1>
<p>Before diving into complex spatial statistics, we begin with an exploratory data analysis (EDA) at the provincial level to understand the basic distribution patterns of schools across Jakarta.</p>
<p>This initial exploration focuses on four key aspects:</p>
<ul>
<li><p>The overall distribution of schools across Jakarta’s administrative cities,</p></li>
<li><p>The composition of different school levels in each city,</p></li>
<li><p>The spatial density of schools,</p></li>
<li><p>The relationship between school distribution and population density.</p></li>
</ul>
<section id="overall-distribution-of-schools" class="level2">
<h2 class="anchored" data-anchor-id="overall-distribution-of-schools">Overall Distribution of Schools</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 1: Basic distribution of schools across cities</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> jakarta_schools) <span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create bar chart counting schools per city</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> city_name, <span class="at">fill =</span> city_name)) <span class="sc">+</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Use plasma color palette for distinction</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>(<span class="at">option =</span> <span class="st">"plasma"</span>) <span class="sc">+</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Rotate x-axis labels for better readability</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove redundant legend</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Distribution of Schools Across Jakarta"</span>,</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"City"</span>,</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Number of Schools"</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Takehome_Ex3_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="distribution-of-school-levels" class="level2">
<h2 class="anchored" data-anchor-id="distribution-of-school-levels">Distribution of School Levels</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 2: Distribution of school levels by city</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> jakarta_schools) <span class="sc">+</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Stacked bar chart showing school level composition</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> city_name, <span class="at">fill =</span> school_level)) <span class="sc">+</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>(<span class="at">option =</span> <span class="st">"plasma"</span>) <span class="sc">+</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">face =</span> <span class="st">"bold"</span>)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Distribution of School Levels Across Jakarta"</span>,</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"City"</span>,</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Number of Schools"</span>,</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"School Level"</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Takehome_Ex3_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="school-density-across-jakarta" class="level2">
<h2 class="anchored" data-anchor-id="school-density-across-jakarta">School Density Across Jakarta</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 3: Spatial distribution of schools</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create choropleth map using administrative boundaries</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> adm2, </span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>          <span class="co"># Count number of schools in each administrative region</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>          <span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">lengths</span>(<span class="fu">st_intersects</span>(adm2, jakarta_schools)))) <span class="sc">+</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">"plasma"</span>) <span class="sc">+</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"School Density Across Jakarta"</span>,</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Number of</span><span class="sc">\n</span><span class="st">Schools"</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Takehome_Ex3_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="population-density-in-jakarta" class="level2">
<h2 class="anchored" data-anchor-id="population-density-in-jakarta">Population Density in Jakarta</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 4: Population density distribution</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create choropleth map of population density</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> batas, <span class="fu">aes</span>(<span class="at">fill =</span> popn_density)) <span class="sc">+</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">option =</span> <span class="st">"plasma"</span>,</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Format large numbers with commas</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>()</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Population Density in Jakarta"</span>,</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Population</span><span class="sc">\n</span><span class="st">Density</span><span class="sc">\n</span><span class="st">(per km²)"</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Takehome_Ex3_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="key-insights" class="level3">
<h3 class="anchored" data-anchor-id="key-insights">Key Insights</h3>
<ol type="1">
<li><p><strong>Geographic Disparities</strong>: There are clear disparities in school distribution across Jakarta’s regions, which may require attention from educational planners.</p></li>
<li><p><strong>Educational Level Balance</strong>: While elementary schools dominate, there appears to be a reasonable distribution across educational levels, though some areas might benefit from more balanced development.</p></li>
</ol>
</section>
</section>
</section>
<section id="kernel-density-estimation-analysis-at-provincial-level" class="level1">
<h1>Kernel Density Estimation Analysis at Provincial Level</h1>
<p>Following our initial exploratory analysis, we employ Kernel Density Estimation (KDE) to gain a more nuanced understanding of school distribution patterns across Jakarta. KDE is particularly valuable for this analysis as it helps identify areas of high and low school concentration by creating a continuous surface of density estimates.<br>
</p>
<p>This technique goes beyond simple point mapping by considering the spatial influence of each school location on its surroundings, effectively highlighting clusters and gaps in educational infrastructure. By converting our data to UTM projection and applying appropriate edge corrections, we ensure accurate distance calculations and reliable density estimates, especially near the study area boundaries.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert coordinate systems for accurate distance measurement</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># UTM Zone 48S (EPSG:32748) is appropriate for Jakarta</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>jakarta_schools_utm <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(jakarta_schools, <span class="dv">32748</span>)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>adm2_utm <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(adm2, <span class="dv">32748</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract coordinates and add small random noise to prevent exact duplicates</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co"># This helps avoid computational issues in point pattern analysis</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>coords <span class="ot">&lt;-</span> <span class="fu">st_coordinates</span>(jakarta_schools_utm)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>jittered_coords <span class="ot">&lt;-</span> coords <span class="sc">+</span> <span class="fu">matrix</span>(</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">runif</span>(<span class="fu">nrow</span>(coords) <span class="sc">*</span> <span class="dv">2</span>, <span class="sc">-</span><span class="fl">0.1</span>, <span class="fl">0.1</span>),  <span class="co"># Add noise between -0.1 and 0.1 meters</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">ncol =</span> <span class="dv">2</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create observation window from administrative boundary</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co"># This defines the study area for the point pattern analysis</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>window <span class="ot">&lt;-</span> <span class="fu">as.owin</span>(<span class="fu">st_union</span>(adm2_utm))</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter points to ensure they fall within the study area</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co"># This step is crucial for accurate density estimation</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>inside <span class="ot">&lt;-</span> <span class="fu">inside.owin</span>(<span class="at">x =</span> jittered_coords[,<span class="dv">1</span>], </span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> jittered_coords[,<span class="dv">2</span>], </span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>                     <span class="at">w =</span> window)</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>valid_coords <span class="ot">&lt;-</span> jittered_coords[inside,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create point pattern object for spatial statistics</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>points <span class="ot">&lt;-</span> <span class="fu">ppp</span>(</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> valid_coords[,<span class="dv">1</span>],</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> valid_coords[,<span class="dv">2</span>],</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">window =</span> window</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Diagnostic prints to verify data integrity</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Original points:"</span>, <span class="fu">nrow</span>(coords)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Original points: 4762"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Points in window:"</span>, <span class="fu">sum</span>(inside)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Points in window: 4734"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Duplicated points:"</span>, <span class="fu">sum</span>(<span class="fu">duplicated</span>(valid_coords))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Duplicated points: 0"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform kernel density estimation</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co"># bw.diggle provides data-driven bandwidth selection</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co"># edge=TRUE applies edge correction for boundary effects</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>kde <span class="ot">&lt;-</span> <span class="fu">density.ppp</span>(points, </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">sigma =</span> <span class="fu">bw.diggle</span>(points),</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>                  <span class="at">edge =</span> <span class="cn">TRUE</span>)</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert KDE results to data frame for further analysis/visualization</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>kde_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(kde)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> adm2_utm, <span class="at">fill =</span> <span class="st">"transparent"</span>) <span class="sc">+</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">data =</span> kde_df, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> value)) <span class="sc">+</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">"plasma"</span>) <span class="sc">+</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Kernel Density Estimation of All Schools"</span>,</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="fu">paste0</span>(<span class="st">"Based on "</span>, <span class="fu">sum</span>(inside), <span class="st">" school locations"</span>),</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Density"</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Takehome_Ex3_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="section" class="level1">
<h1></h1>
<section id="distribution-patterns" class="level3">
<h3 class="anchored" data-anchor-id="distribution-patterns">Distribution Patterns</h3>
<p>The KDE analysis of 4,734 schools across Jakarta shows:</p>
<ol type="1">
<li><strong>High-Density Clusters (Yellow/Orange)</strong>
<ul>
<li>Several distinct hotspots visible across the map</li>
<li>Particularly noticeable in scattered locations across the northern and central regions</li>
<li>Maximum density reaches 0.00015 schools per square meter</li>
</ul></li>
<li><strong>Medium-Density Areas (Pink/Light Purple)</strong>
<ul>
<li>Form connecting networks between the high-density clusters</li>
<li>More prevalent in the central portions of the map</li>
</ul></li>
<li><strong>Low-Density Regions (Dark Purple)</strong>
<ul>
<li>Large portions of Jakarta, especially in the southern regions</li>
<li>Shows minimal school presence compared to other areas</li>
</ul></li>
</ol>
<p>The distribution appears notably clustered rather than uniform, suggesting spatial variations in school accessibility across different parts of Jakarta.</p>
<section id="kde-by-school-level" class="level4">
<h4 class="anchored" data-anchor-id="kde-by-school-level">1.2.2 KDE by School Level</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an empty list to store KDE plots for each school level</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>kde_plots <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterate through each unique school level in the dataset</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(level <span class="cf">in</span> <span class="fu">unique</span>(jakarta_schools_utm<span class="sc">$</span>school_level)) {</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Filter schools for current level</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  schools_subset <span class="ot">&lt;-</span> jakarta_schools_utm[jakarta_schools_utm<span class="sc">$</span>school_level <span class="sc">==</span> level,]</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract coordinates from spatial data</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  coords <span class="ot">&lt;-</span> <span class="fu">st_coordinates</span>(schools_subset)</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add small random noise to prevent exact duplicates</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Important for computational stability</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>  jittered_coords <span class="ot">&lt;-</span> coords <span class="sc">+</span> <span class="fu">matrix</span>(</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">runif</span>(<span class="fu">nrow</span>(coords) <span class="sc">*</span> <span class="dv">2</span>, <span class="sc">-</span><span class="fl">0.1</span>, <span class="fl">0.1</span>),  <span class="co"># Random noise between -0.1 and 0.1 meters</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">ncol =</span> <span class="dv">2</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Check which points fall within study area boundary</span></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>  inside <span class="ot">&lt;-</span> <span class="fu">inside.owin</span>(<span class="at">x =</span> jittered_coords[,<span class="dv">1</span>],</span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> jittered_coords[,<span class="dv">2</span>],</span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>                       <span class="at">w =</span> window)</span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>  valid_coords <span class="ot">&lt;-</span> jittered_coords[inside,]</span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create point pattern object for spatial analysis</span></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>  points_subset <span class="ot">&lt;-</span> <span class="fu">ppp</span>(</span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> valid_coords[,<span class="dv">1</span>],</span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> valid_coords[,<span class="dv">2</span>],</span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">window =</span> window</span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Perform kernel density estimation</span></span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Using Diggle's method for bandwidth selection</span></span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Edge correction applied for boundary effects</span></span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a>  kde_level <span class="ot">&lt;-</span> <span class="fu">density.ppp</span>(points_subset,</span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a>                          <span class="at">sigma =</span> <span class="fu">bw.diggle</span>(points_subset),</span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a>                          <span class="at">edge =</span> <span class="cn">TRUE</span>)</span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-39"><a href="#cb25-39" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Convert KDE results to data frame for plotting</span></span>
<span id="cb25-40"><a href="#cb25-40" aria-hidden="true" tabindex="-1"></a>  kde_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(kde_level)</span>
<span id="cb25-41"><a href="#cb25-41" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-42"><a href="#cb25-42" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create density plot using ggplot2</span></span>
<span id="cb25-43"><a href="#cb25-43" aria-hidden="true" tabindex="-1"></a>  kde_plots[[level]] <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb25-44"><a href="#cb25-44" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add administrative boundaries</span></span>
<span id="cb25-45"><a href="#cb25-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> adm2_utm, <span class="at">fill =</span> <span class="st">"transparent"</span>) <span class="sc">+</span></span>
<span id="cb25-46"><a href="#cb25-46" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add density heatmap</span></span>
<span id="cb25-47"><a href="#cb25-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_tile</span>(<span class="at">data =</span> kde_df, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> value)) <span class="sc">+</span></span>
<span id="cb25-48"><a href="#cb25-48" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Use plasma color scheme for density visualization</span></span>
<span id="cb25-49"><a href="#cb25-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">"plasma"</span>) <span class="sc">+</span></span>
<span id="cb25-50"><a href="#cb25-50" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb25-51"><a href="#cb25-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb25-52"><a href="#cb25-52" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> <span class="fu">paste</span>(<span class="st">"School Density:"</span>, level),</span>
<span id="cb25-53"><a href="#cb25-53" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Show number of schools included in analysis</span></span>
<span id="cb25-54"><a href="#cb25-54" aria-hidden="true" tabindex="-1"></a>      <span class="at">subtitle =</span> <span class="fu">paste0</span>(<span class="st">"Based on "</span>, <span class="fu">sum</span>(inside), <span class="st">" school locations"</span>),</span>
<span id="cb25-55"><a href="#cb25-55" aria-hidden="true" tabindex="-1"></a>      <span class="at">fill =</span> <span class="st">"Density"</span></span>
<span id="cb25-56"><a href="#cb25-56" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb25-57"><a href="#cb25-57" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb25-58"><a href="#cb25-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-59"><a href="#cb25-59" aria-hidden="true" tabindex="-1"></a><span class="fu">walk</span>(kde_plots, print)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Takehome_Ex3_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Takehome_Ex3_files/figure-html/unnamed-chunk-18-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Takehome_Ex3_files/figure-html/unnamed-chunk-18-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Takehome_Ex3_files/figure-html/unnamed-chunk-18-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="numbers-and-coverage" class="level3">
<h3 class="anchored" data-anchor-id="numbers-and-coverage">Numbers and Coverage</h3>
<ul>
<li>Elementary (2,585 schools): Most widely distributed, showing small scattered hotspots across Jakarta</li>
<li>Junior High (1,025 schools): Strong clustering pattern, with prominent hotspots in central areas</li>
<li>Senior High (1,044 schools): Concentrated clusters, particularly in northern and central regions</li>
<li>Special Education (80 schools): Limited coverage with sparse distribution</li>
</ul>
</section>
<section id="section-1" class="level3">
<h3 class="anchored" data-anchor-id="section-1"></h3>
</section>
</section>
<section id="exploratory-data-analysis-at-the-city-level" class="level1">
<h1>Exploratory Data Analysis at the City Level</h1>
<section id="school-distribution-by-city" class="level2">
<h2 class="anchored" data-anchor-id="school-distribution-by-city">School Distribution by City</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert boundaries to UTM projection for accurate spatial operations</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>batas_utm <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(batas, <span class="dv">32748</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize list to store individual city maps</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>city_maps <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create separate maps for each city</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(city <span class="cf">in</span> <span class="fu">unique</span>(batas<span class="sc">$</span>city)) {</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract boundary for current city</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>  city_boundary <span class="ot">&lt;-</span> batas_utm[batas_utm<span class="sc">$</span>city <span class="sc">==</span> city,]</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Find schools within current city boundary</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>  city_schools <span class="ot">&lt;-</span> jakarta_schools_utm[<span class="fu">st_intersects</span>(jakarta_schools_utm, </span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>                                                   <span class="fu">st_union</span>(city_boundary)) <span class="sc">%&gt;%</span> </span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>                                      lengths <span class="sc">&gt;</span> <span class="dv">0</span>,]</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create map for current city</span></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>  city_maps[[city]] <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add population density choropleth</span></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> city_boundary, </span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">fill =</span> popn_density)) <span class="sc">+</span></span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add school points colored by level</span></span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> city_schools,</span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">color =</span> school_level),</span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="dv">2</span>,</span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Set color scales</span></span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis_c</span>(</span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a>      <span class="at">option =</span> <span class="st">"plasma"</span>,</span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">name =</span> <span class="st">"Population</span><span class="sc">\n</span><span class="st">Density"</span>,</span>
<span id="cb26-31"><a href="#cb26-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>()</span>
<span id="cb26-32"><a href="#cb26-32" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb26-33"><a href="#cb26-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_viridis_d</span>(</span>
<span id="cb26-34"><a href="#cb26-34" aria-hidden="true" tabindex="-1"></a>      <span class="at">option =</span> <span class="st">"plasma"</span>,</span>
<span id="cb26-35"><a href="#cb26-35" aria-hidden="true" tabindex="-1"></a>      <span class="at">name =</span> <span class="st">"School Level"</span></span>
<span id="cb26-36"><a href="#cb26-36" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb26-37"><a href="#cb26-37" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Customize theme</span></span>
<span id="cb26-38"><a href="#cb26-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb26-39"><a href="#cb26-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb26-40"><a href="#cb26-40" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb26-41"><a href="#cb26-41" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb26-42"><a href="#cb26-42" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb26-43"><a href="#cb26-43" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>),</span>
<span id="cb26-44"><a href="#cb26-44" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">10</span>)</span>
<span id="cb26-45"><a href="#cb26-45" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb26-46"><a href="#cb26-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb26-47"><a href="#cb26-47" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> <span class="fu">paste</span>(<span class="st">"Schools Distribution in"</span>, city)</span>
<span id="cb26-48"><a href="#cb26-48" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb26-49"><a href="#cb26-49" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb26-50"><a href="#cb26-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-51"><a href="#cb26-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Display all city maps</span></span>
<span id="cb26-52"><a href="#cb26-52" aria-hidden="true" tabindex="-1"></a><span class="fu">walk</span>(<span class="fu">names</span>(city_maps), <span class="cf">function</span>(city) {</span>
<span id="cb26-53"><a href="#cb26-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(city_maps[[city]])</span>
<span id="cb26-54"><a href="#cb26-54" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Takehome_Ex3_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Takehome_Ex3_files/figure-html/unnamed-chunk-19-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Takehome_Ex3_files/figure-html/unnamed-chunk-19-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Takehome_Ex3_files/figure-html/unnamed-chunk-19-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Takehome_Ex3_files/figure-html/unnamed-chunk-19-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="public-school-ratio-by-city" class="level2">
<h2 class="anchored" data-anchor-id="public-school-ratio-by-city">Public School Ratio by City</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the proportion of public schools for each city</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>public_ratio <span class="ot">&lt;-</span> jakarta_schools_utm <span class="sc">%&gt;%</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Group data by city</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(city_name) <span class="sc">%&gt;%</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate summary statistics</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_schools =</span> <span class="fu">n</span>(),                                    <span class="co"># Total number of schools</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">public_schools =</span> <span class="fu">sum</span>(school_type <span class="sc">==</span> <span class="st">"Public"</span>),          <span class="co"># Count of public schools</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">public_ratio =</span> public_schools <span class="sc">/</span> total_schools,          <span class="co"># Calculate proportion</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span>                                        <span class="co"># Drop grouping</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Create bar plot of public school ratios</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(public_ratio) <span class="sc">+</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create bars, reordered by public_ratio</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(city_name, public_ratio),       <span class="co"># Order bars by ratio</span></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> public_ratio, </span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> city_name), </span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>           <span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Use plasma color palette from viridis</span></span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>(<span class="at">option =</span> <span class="st">"plasma"</span>) <span class="sc">+</span></span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Apply minimal theme</span></span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Customize theme elements</span></span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),     <span class="co"># Rotate x-axis labels</span></span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>,                               <span class="co"># Remove legend</span></span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">"bold"</span>),   <span class="co"># Format title</span></span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>)                 <span class="co"># Format subtitle</span></span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add plot labels</span></span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Public School Ratio by City"</span>,</span>
<span id="cb27-34"><a href="#cb27-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Proportion of public schools to total schools"</span>,</span>
<span id="cb27-35"><a href="#cb27-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"City"</span>,</span>
<span id="cb27-36"><a href="#cb27-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Proportion of Public Schools"</span></span>
<span id="cb27-37"><a href="#cb27-37" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Takehome_Ex3_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="public-school-ratio-analysis---key-findings" class="level3">
<h3 class="anchored" data-anchor-id="public-school-ratio-analysis---key-findings">Public School Ratio Analysis - Key Findings</h3>
<section id="distribution-across-cities" class="level4">
<h4 class="anchored" data-anchor-id="distribution-across-cities">Distribution Across Cities</h4>
<ul>
<li><strong>Highest Ratio</strong>: Kota Jakarta Selatan (~52% public schools)</li>
<li><strong>Lowest Ratio</strong>: Kota Jakarta Utara (~38% public schools)</li>
<li><strong>Overall Range</strong>: ~14% difference between highest and lowest</li>
</ul>
</section>
<section id="city-specific-breakdown" class="level4">
<h4 class="anchored" data-anchor-id="city-specific-breakdown">City-Specific Breakdown</h4>
<ol type="1">
<li><strong>Kota Jakarta Selatan</strong> (Pink)
<ul>
<li>Highest proportion of public schools (~52%)</li>
<li>Suggests strongest public education presence</li>
</ul></li>
<li><strong>Kota Jakarta Timur</strong> (Orange)
<ul>
<li>Second-highest ratio (~51%)</li>
<li>Nearly matches South Jakarta’s public school proportion</li>
</ul></li>
<li><strong>Kota Jakarta Pusat</strong> (Purple)
<ul>
<li>Middle range (~50%)</li>
<li>Shows balanced public-private distribution</li>
</ul></li>
<li><strong>Kota Jakarta Barat</strong> (Dark Blue)
<ul>
<li>Lower ratio (~40%)</li>
<li>Shows stronger private school presence</li>
</ul></li>
<li><strong>Kota Jakarta Utara</strong> (Yellow)
<ul>
<li>Lowest public school ratio (~38%)</li>
<li>Indicates dominance of private education providers</li>
</ul></li>
</ol>
</section>
</section>
</section>
</section>
<section id="kernel-density-estimation-analysis-at-city-level" class="level1">
<h1>Kernel Density Estimation Analysis at City Level</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize list to store KDE results for each city</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>kde_city_level <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform KDE analysis for each city</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(city <span class="cf">in</span> <span class="fu">unique</span>(jakarta_schools_utm<span class="sc">$</span>city_name)) {</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Filter data for current city</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>  city_schools <span class="ot">&lt;-</span> jakarta_schools_utm[jakarta_schools_utm<span class="sc">$</span>city_name <span class="sc">==</span> city,]</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>  city_boundary <span class="ot">&lt;-</span> adm2_utm[adm2_utm<span class="sc">$</span>shapeName <span class="sc">==</span> city,]</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>  city_window <span class="ot">&lt;-</span> <span class="fu">as.owin</span>(<span class="fu">st_union</span>(city_boundary))</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate window size for bandwidth consideration</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>  win_size <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(<span class="fu">area.owin</span>(city_window))</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>  kde_city_level[[city]] <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Process all schools in city</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>  coords <span class="ot">&lt;-</span> <span class="fu">st_coordinates</span>(city_schools)</span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>  jittered_coords <span class="ot">&lt;-</span> coords <span class="sc">+</span> <span class="fu">matrix</span>(</span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">runif</span>(<span class="fu">nrow</span>(coords) <span class="sc">*</span> <span class="dv">2</span>, <span class="sc">-</span><span class="fl">0.1</span>, <span class="fl">0.1</span>),  <span class="co"># Add small random noise</span></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">ncol =</span> <span class="dv">2</span></span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Filter valid points</span></span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a>  inside <span class="ot">&lt;-</span> <span class="fu">inside.owin</span>(<span class="at">x =</span> jittered_coords[,<span class="dv">1</span>],</span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> jittered_coords[,<span class="dv">2</span>],</span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a>                       <span class="at">w =</span> city_window)</span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a>  valid_coords <span class="ot">&lt;-</span> jittered_coords[inside,]</span>
<span id="cb28-28"><a href="#cb28-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb28-29"><a href="#cb28-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Perform KDE if enough points available</span></span>
<span id="cb28-30"><a href="#cb28-30" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">nrow</span>(valid_coords) <span class="sc">&gt;=</span> <span class="dv">4</span>) {</span>
<span id="cb28-31"><a href="#cb28-31" aria-hidden="true" tabindex="-1"></a>    points_ppp <span class="ot">&lt;-</span> <span class="fu">ppp</span>(</span>
<span id="cb28-32"><a href="#cb28-32" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> valid_coords[,<span class="dv">1</span>],</span>
<span id="cb28-33"><a href="#cb28-33" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> valid_coords[,<span class="dv">2</span>],</span>
<span id="cb28-34"><a href="#cb28-34" aria-hidden="true" tabindex="-1"></a>      <span class="at">window =</span> city_window</span>
<span id="cb28-35"><a href="#cb28-35" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb28-36"><a href="#cb28-36" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-37"><a href="#cb28-37" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate bandwidth using Scott's rule</span></span>
<span id="cb28-38"><a href="#cb28-38" aria-hidden="true" tabindex="-1"></a>    h <span class="ot">&lt;-</span> <span class="fu">bw.scott</span>(points_ppp)</span>
<span id="cb28-39"><a href="#cb28-39" aria-hidden="true" tabindex="-1"></a>    kde <span class="ot">&lt;-</span> <span class="fu">density.ppp</span>(points_ppp, </span>
<span id="cb28-40"><a href="#cb28-40" aria-hidden="true" tabindex="-1"></a>                      <span class="at">sigma =</span> h,</span>
<span id="cb28-41"><a href="#cb28-41" aria-hidden="true" tabindex="-1"></a>                      <span class="at">edge =</span> <span class="cn">TRUE</span>,</span>
<span id="cb28-42"><a href="#cb28-42" aria-hidden="true" tabindex="-1"></a>                      <span class="at">at =</span> <span class="st">"pixels"</span>,</span>
<span id="cb28-43"><a href="#cb28-43" aria-hidden="true" tabindex="-1"></a>                      <span class="at">dimyx =</span> <span class="fu">c</span>(<span class="dv">128</span>, <span class="dv">128</span>))</span>
<span id="cb28-44"><a href="#cb28-44" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-45"><a href="#cb28-45" aria-hidden="true" tabindex="-1"></a>    kde_city_level[[city]][[<span class="st">"All"</span>]] <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb28-46"><a href="#cb28-46" aria-hidden="true" tabindex="-1"></a>      <span class="at">kde =</span> kde,</span>
<span id="cb28-47"><a href="#cb28-47" aria-hidden="true" tabindex="-1"></a>      <span class="at">n_points =</span> <span class="fu">nrow</span>(valid_coords),</span>
<span id="cb28-48"><a href="#cb28-48" aria-hidden="true" tabindex="-1"></a>      <span class="at">bandwidth =</span> h</span>
<span id="cb28-49"><a href="#cb28-49" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb28-50"><a href="#cb28-50" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb28-51"><a href="#cb28-51" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb28-52"><a href="#cb28-52" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Repeat analysis for each school level</span></span>
<span id="cb28-53"><a href="#cb28-53" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(level <span class="cf">in</span> <span class="fu">unique</span>(city_schools<span class="sc">$</span>school_level)) {</span>
<span id="cb28-54"><a href="#cb28-54" aria-hidden="true" tabindex="-1"></a>    level_schools <span class="ot">&lt;-</span> city_schools[city_schools<span class="sc">$</span>school_level <span class="sc">==</span> level,]</span>
<span id="cb28-55"><a href="#cb28-55" aria-hidden="true" tabindex="-1"></a>    coords <span class="ot">&lt;-</span> <span class="fu">st_coordinates</span>(level_schools)</span>
<span id="cb28-56"><a href="#cb28-56" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-57"><a href="#cb28-57" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add jitter and filter points</span></span>
<span id="cb28-58"><a href="#cb28-58" aria-hidden="true" tabindex="-1"></a>    jittered_coords <span class="ot">&lt;-</span> coords <span class="sc">+</span> <span class="fu">matrix</span>(</span>
<span id="cb28-59"><a href="#cb28-59" aria-hidden="true" tabindex="-1"></a>      <span class="fu">runif</span>(<span class="fu">nrow</span>(coords) <span class="sc">*</span> <span class="dv">2</span>, <span class="sc">-</span><span class="fl">0.1</span>, <span class="fl">0.1</span>),</span>
<span id="cb28-60"><a href="#cb28-60" aria-hidden="true" tabindex="-1"></a>      <span class="at">ncol =</span> <span class="dv">2</span></span>
<span id="cb28-61"><a href="#cb28-61" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb28-62"><a href="#cb28-62" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-63"><a href="#cb28-63" aria-hidden="true" tabindex="-1"></a>    inside <span class="ot">&lt;-</span> <span class="fu">inside.owin</span>(<span class="at">x =</span> jittered_coords[,<span class="dv">1</span>],</span>
<span id="cb28-64"><a href="#cb28-64" aria-hidden="true" tabindex="-1"></a>                         <span class="at">y =</span> jittered_coords[,<span class="dv">2</span>],</span>
<span id="cb28-65"><a href="#cb28-65" aria-hidden="true" tabindex="-1"></a>                         <span class="at">w =</span> city_window)</span>
<span id="cb28-66"><a href="#cb28-66" aria-hidden="true" tabindex="-1"></a>    valid_coords <span class="ot">&lt;-</span> jittered_coords[inside,]</span>
<span id="cb28-67"><a href="#cb28-67" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-68"><a href="#cb28-68" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Perform KDE if enough points</span></span>
<span id="cb28-69"><a href="#cb28-69" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">nrow</span>(valid_coords) <span class="sc">&gt;=</span> <span class="dv">4</span>) {</span>
<span id="cb28-70"><a href="#cb28-70" aria-hidden="true" tabindex="-1"></a>      points_ppp <span class="ot">&lt;-</span> <span class="fu">ppp</span>(</span>
<span id="cb28-71"><a href="#cb28-71" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> valid_coords[,<span class="dv">1</span>],</span>
<span id="cb28-72"><a href="#cb28-72" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> valid_coords[,<span class="dv">2</span>],</span>
<span id="cb28-73"><a href="#cb28-73" aria-hidden="true" tabindex="-1"></a>        <span class="at">window =</span> city_window</span>
<span id="cb28-74"><a href="#cb28-74" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb28-75"><a href="#cb28-75" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb28-76"><a href="#cb28-76" aria-hidden="true" tabindex="-1"></a>      h <span class="ot">&lt;-</span> <span class="fu">bw.scott</span>(points_ppp)</span>
<span id="cb28-77"><a href="#cb28-77" aria-hidden="true" tabindex="-1"></a>      kde <span class="ot">&lt;-</span> <span class="fu">density.ppp</span>(points_ppp, </span>
<span id="cb28-78"><a href="#cb28-78" aria-hidden="true" tabindex="-1"></a>                        <span class="at">sigma =</span> h,</span>
<span id="cb28-79"><a href="#cb28-79" aria-hidden="true" tabindex="-1"></a>                        <span class="at">edge =</span> <span class="cn">TRUE</span>,</span>
<span id="cb28-80"><a href="#cb28-80" aria-hidden="true" tabindex="-1"></a>                        <span class="at">at =</span> <span class="st">"pixels"</span>,</span>
<span id="cb28-81"><a href="#cb28-81" aria-hidden="true" tabindex="-1"></a>                        <span class="at">dimyx =</span> <span class="fu">c</span>(<span class="dv">128</span>, <span class="dv">128</span>))</span>
<span id="cb28-82"><a href="#cb28-82" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb28-83"><a href="#cb28-83" aria-hidden="true" tabindex="-1"></a>      kde_city_level[[city]][[level]] <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb28-84"><a href="#cb28-84" aria-hidden="true" tabindex="-1"></a>        <span class="at">kde =</span> kde,</span>
<span id="cb28-85"><a href="#cb28-85" aria-hidden="true" tabindex="-1"></a>        <span class="at">n_points =</span> <span class="fu">nrow</span>(valid_coords),</span>
<span id="cb28-86"><a href="#cb28-86" aria-hidden="true" tabindex="-1"></a>        <span class="at">bandwidth =</span> h</span>
<span id="cb28-87"><a href="#cb28-87" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb28-88"><a href="#cb28-88" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb28-89"><a href="#cb28-89" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb28-90"><a href="#cb28-90" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate and store density metrics</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>density_metrics <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">city =</span> <span class="fu">character</span>(),</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">level =</span> <span class="fu">character</span>(),</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_density =</span> <span class="fu">numeric</span>(),</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">mean_density =</span> <span class="fu">numeric</span>(),</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">relative_density =</span> <span class="fu">numeric</span>(),</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate relative densities for each city and school level</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(city <span class="cf">in</span> <span class="fu">names</span>(kde_city_level)) {</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>  city_max <span class="ot">&lt;-</span> <span class="fu">max</span>(kde_city_level[[city]][[<span class="st">"All"</span>]]<span class="sc">$</span>kde<span class="sc">$</span>v, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(level <span class="cf">in</span> <span class="fu">names</span>(kde_city_level[[city]])) {</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(level <span class="sc">!=</span> <span class="st">"All"</span>) {</span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>      kde_data <span class="ot">&lt;-</span> kde_city_level[[city]][[level]]</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>      density_metrics <span class="ot">&lt;-</span> <span class="fu">rbind</span>(density_metrics, <span class="fu">data.frame</span>(</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">city =</span> city,</span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">level =</span> level,</span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">max_density =</span> <span class="fu">max</span>(kde_data<span class="sc">$</span>kde<span class="sc">$</span>v, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">mean_density =</span> <span class="fu">mean</span>(kde_data<span class="sc">$</span>kde<span class="sc">$</span>v, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">relative_density =</span> <span class="fu">max</span>(kde_data<span class="sc">$</span>kde<span class="sc">$</span>v, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">/</span> city_max,</span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>      ))</span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Create visualization of relative densities</span></span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(density_metrics, </span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> level, <span class="at">y =</span> relative_density, <span class="at">fill =</span> city)) <span class="sc">+</span></span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>(<span class="at">option =</span> <span class="st">"plasma"</span>) <span class="sc">+</span></span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb29-39"><a href="#cb29-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb29-40"><a href="#cb29-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb29-41"><a href="#cb29-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb29-42"><a href="#cb29-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb29-43"><a href="#cb29-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>)</span>
<span id="cb29-44"><a href="#cb29-44" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-45"><a href="#cb29-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb29-46"><a href="#cb29-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Relative Density of School Types by City"</span>,</span>
<span id="cb29-47"><a href="#cb29-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Maximum density relative to overall school density"</span>,</span>
<span id="cb29-48"><a href="#cb29-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"School Level"</span>,</span>
<span id="cb29-49"><a href="#cb29-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Relative Density"</span>,</span>
<span id="cb29-50"><a href="#cb29-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"City"</span></span>
<span id="cb29-51"><a href="#cb29-51" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Takehome_Ex3_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="section-2" class="level2">
<h2 class="anchored" data-anchor-id="section-2"></h2>
</section>
<section id="key-findings---relative-density-analysis" class="level2">
<h2 class="anchored" data-anchor-id="key-findings---relative-density-analysis">Key Findings - Relative Density Analysis</h2>
<section id="school-level-patterns" class="level3">
<h3 class="anchored" data-anchor-id="school-level-patterns">School Level Patterns</h3>
<ol type="1">
<li><strong>Elementary Schools</strong>
<ul>
<li>Highest relative density across all cities (~0.6-0.7)</li>
<li>Kota Jakarta Pusat shows highest concentration</li>
<li>Relatively consistent across cities</li>
</ul></li>
<li><strong>Secondary Education</strong>
<ul>
<li>Junior High: Moderate density (~0.2) across all cities</li>
<li>Senior High: Similar pattern to Junior High but slightly lower</li>
<li>Consistent pattern across cities</li>
</ul></li>
<li><strong>Special Education</strong>
<ul>
<li>Lowest relative density (&lt;0.1) in all cities</li>
<li>Minimal variation between cities</li>
</ul></li>
</ol>
</section>
<section id="overall-observations" class="level3">
<h3 class="anchored" data-anchor-id="overall-observations">Overall Observations</h3>
<ul>
<li>Clear hierarchical pattern: Elementary &gt; Junior High &gt; Senior High &gt; Special Education</li>
<li>Remarkably consistent patterns across all five cities</li>
<li>Central Jakarta (Pusat) shows slightly higher densities across most school levels</li>
</ul>
</section>
</section>
<section id="section-3" class="level2">
<h2 class="anchored" data-anchor-id="section-3"></h2>
</section>
</section>
<section id="lisa-analysis" class="level1">
<h1>LISA Analysis</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct aggregation to maintain separate districts</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>district_boundaries <span class="ot">&lt;-</span> batas_utm <span class="sc">%&gt;%</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(city, district) <span class="sc">%&gt;%</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_population =</span> <span class="fu">sum</span>(population),</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_area =</span> <span class="fu">sum</span>(area_size),</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">popn_density =</span> total_population <span class="sc">/</span> total_area,</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Maintain separate geometries for each district</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">do_union =</span> <span class="cn">TRUE</span>,</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">'drop'</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Spatial Analysis of Jakarta Educational Infrastructure</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Join school data with district boundaries</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Purpose: Aggregate school-level data to district level</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Input: jakarta_schools_utm (school points), district_boundaries (polygons)</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Output: District-level summary statistics</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>district_schools <span class="ot">&lt;-</span> <span class="fu">st_join</span>(jakarta_schools_utm, </span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>                           <span class="fu">st_transform</span>(district_boundaries, <span class="fu">st_crs</span>(jakarta_schools_utm))) <span class="sc">%&gt;%</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(district) <span class="sc">%&gt;%</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Count total schools and public schools</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_schools =</span> <span class="fu">n</span>(),</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">public_schools =</span> <span class="fu">sum</span>(school_type <span class="sc">==</span> <span class="st">"Public"</span>),</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Count schools by education level</span></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">elementary_count =</span> <span class="fu">sum</span>(school_level <span class="sc">==</span> <span class="st">"Elementary"</span>),</span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">junior_high_count =</span> <span class="fu">sum</span>(school_level <span class="sc">==</span> <span class="st">"Junior High"</span>),</span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">senior_high_count =</span> <span class="fu">sum</span>(school_level <span class="sc">==</span> <span class="st">"Senior High"</span>),</span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">special_ed_count =</span> <span class="fu">sum</span>(school_level <span class="sc">==</span> <span class="st">"Special Education"</span>)</span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Calculate district-level metrics</span></span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Purpose: Compute density and ratio metrics for analysis</span></span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Output: District boundaries with added metrics</span></span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a>district_metrics <span class="ot">&lt;-</span> district_boundaries <span class="sc">%&gt;%</span></span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(district_schools, <span class="at">by =</span> <span class="st">"district"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate school density (schools per square km)</span></span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">school_density =</span> total_schools <span class="sc">/</span> total_area,</span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">elementary_density =</span> elementary_count <span class="sc">/</span> total_area,</span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">junior_high_density =</span> junior_high_count <span class="sc">/</span> total_area,</span>
<span id="cb31-33"><a href="#cb31-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">senior_high_density =</span> senior_high_count <span class="sc">/</span> total_area,</span>
<span id="cb31-34"><a href="#cb31-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">special_ed_density =</span> special_ed_count <span class="sc">/</span> total_area,</span>
<span id="cb31-35"><a href="#cb31-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb31-36"><a href="#cb31-36" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate public school ratio</span></span>
<span id="cb31-37"><a href="#cb31-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">public_ratio =</span> public_schools <span class="sc">/</span> total_schools</span>
<span id="cb31-38"><a href="#cb31-38" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb31-39"><a href="#cb31-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-40"><a href="#cb31-40" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Create spatial weights matrix</span></span>
<span id="cb31-41"><a href="#cb31-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Purpose: Define spatial relationships between districts</span></span>
<span id="cb31-42"><a href="#cb31-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Method: Queen contiguity (districts sharing any boundary point are neighbors)</span></span>
<span id="cb31-43"><a href="#cb31-43" aria-hidden="true" tabindex="-1"></a>district_neighbors <span class="ot">&lt;-</span> <span class="fu">poly2nb</span>(district_metrics, <span class="at">queen =</span> <span class="cn">TRUE</span>)</span>
<span id="cb31-44"><a href="#cb31-44" aria-hidden="true" tabindex="-1"></a>district_weights <span class="ot">&lt;-</span> <span class="fu">nb2listw</span>(district_neighbors, <span class="at">style =</span> <span class="st">"W"</span>)</span>
<span id="cb31-45"><a href="#cb31-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-46"><a href="#cb31-46" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Define metrics for analysis</span></span>
<span id="cb31-47"><a href="#cb31-47" aria-hidden="true" tabindex="-1"></a><span class="co"># List of variables to be analyzed with LISA statistics</span></span>
<span id="cb31-48"><a href="#cb31-48" aria-hidden="true" tabindex="-1"></a>metrics_to_analyze <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb31-49"><a href="#cb31-49" aria-hidden="true" tabindex="-1"></a>    <span class="st">"school_density"</span>,</span>
<span id="cb31-50"><a href="#cb31-50" aria-hidden="true" tabindex="-1"></a>    <span class="st">"elementary_density"</span>,</span>
<span id="cb31-51"><a href="#cb31-51" aria-hidden="true" tabindex="-1"></a>    <span class="st">"junior_high_density"</span>,</span>
<span id="cb31-52"><a href="#cb31-52" aria-hidden="true" tabindex="-1"></a>    <span class="st">"senior_high_density"</span>,</span>
<span id="cb31-53"><a href="#cb31-53" aria-hidden="true" tabindex="-1"></a>    <span class="st">"special_ed_density"</span>,</span>
<span id="cb31-54"><a href="#cb31-54" aria-hidden="true" tabindex="-1"></a>    <span class="st">"public_ratio"</span></span>
<span id="cb31-55"><a href="#cb31-55" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb31-56"><a href="#cb31-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-57"><a href="#cb31-57" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. Calculate LISA statistics</span></span>
<span id="cb31-58"><a href="#cb31-58" aria-hidden="true" tabindex="-1"></a><span class="co"># Purpose: Identify spatial clusters and outliers</span></span>
<span id="cb31-59"><a href="#cb31-59" aria-hidden="true" tabindex="-1"></a><span class="co"># Method: Local Moran's I with significance testing</span></span>
<span id="cb31-60"><a href="#cb31-60" aria-hidden="true" tabindex="-1"></a>lisa_results <span class="ot">&lt;-</span> <span class="fu">lapply</span>(metrics_to_analyze, <span class="cf">function</span>(metric) {</span>
<span id="cb31-61"><a href="#cb31-61" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate Local Moran's I</span></span>
<span id="cb31-62"><a href="#cb31-62" aria-hidden="true" tabindex="-1"></a>    local_moran <span class="ot">&lt;-</span> <span class="fu">localmoran</span>(district_metrics[[metric]], district_weights)</span>
<span id="cb31-63"><a href="#cb31-63" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb31-64"><a href="#cb31-64" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate spatial lag for clustering</span></span>
<span id="cb31-65"><a href="#cb31-65" aria-hidden="true" tabindex="-1"></a>    lag_var <span class="ot">&lt;-</span> <span class="fu">lag.listw</span>(district_weights, district_metrics[[metric]])</span>
<span id="cb31-66"><a href="#cb31-66" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb31-67"><a href="#cb31-67" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Standardize variables for comparison</span></span>
<span id="cb31-68"><a href="#cb31-68" aria-hidden="true" tabindex="-1"></a>    z_var <span class="ot">&lt;-</span> <span class="fu">scale</span>(district_metrics[[metric]])</span>
<span id="cb31-69"><a href="#cb31-69" aria-hidden="true" tabindex="-1"></a>    z_lag <span class="ot">&lt;-</span> <span class="fu">scale</span>(lag_var)</span>
<span id="cb31-70"><a href="#cb31-70" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb31-71"><a href="#cb31-71" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Classify clusters based on significance (p &lt; 0.05)</span></span>
<span id="cb31-72"><a href="#cb31-72" aria-hidden="true" tabindex="-1"></a>    clusters <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"Not Significant"</span>, <span class="fu">length</span>(z_var))</span>
<span id="cb31-73"><a href="#cb31-73" aria-hidden="true" tabindex="-1"></a>    sig_indices <span class="ot">&lt;-</span> <span class="fu">which</span>(local_moran[, <span class="st">"Pr(z != E(Ii))"</span>] <span class="sc">&lt;</span> <span class="fl">0.05</span>)</span>
<span id="cb31-74"><a href="#cb31-74" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb31-75"><a href="#cb31-75" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Determine cluster types:</span></span>
<span id="cb31-76"><a href="#cb31-76" aria-hidden="true" tabindex="-1"></a>    <span class="co"># High-High: High values surrounded by high values (hot spots)</span></span>
<span id="cb31-77"><a href="#cb31-77" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Low-Low: Low values surrounded by low values (cold spots)</span></span>
<span id="cb31-78"><a href="#cb31-78" aria-hidden="true" tabindex="-1"></a>    <span class="co"># High-Low: High values surrounded by low values (spatial outliers)</span></span>
<span id="cb31-79"><a href="#cb31-79" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Low-High: Low values surrounded by high values (spatial outliers)</span></span>
<span id="cb31-80"><a href="#cb31-80" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(i <span class="cf">in</span> sig_indices) {</span>
<span id="cb31-81"><a href="#cb31-81" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(z_var[i] <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;&amp;</span> z_lag[i] <span class="sc">&gt;</span> <span class="dv">0</span>) clusters[i] <span class="ot">&lt;-</span> <span class="st">"High-High"</span></span>
<span id="cb31-82"><a href="#cb31-82" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span>(z_var[i] <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">&amp;&amp;</span> z_lag[i] <span class="sc">&lt;</span> <span class="dv">0</span>) clusters[i] <span class="ot">&lt;-</span> <span class="st">"Low-Low"</span></span>
<span id="cb31-83"><a href="#cb31-83" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span>(z_var[i] <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;&amp;</span> z_lag[i] <span class="sc">&lt;</span> <span class="dv">0</span>) clusters[i] <span class="ot">&lt;-</span> <span class="st">"High-Low"</span></span>
<span id="cb31-84"><a href="#cb31-84" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span>(z_var[i] <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">&amp;&amp;</span> z_lag[i] <span class="sc">&gt;</span> <span class="dv">0</span>) clusters[i] <span class="ot">&lt;-</span> <span class="st">"Low-High"</span></span>
<span id="cb31-85"><a href="#cb31-85" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb31-86"><a href="#cb31-86" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb31-87"><a href="#cb31-87" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">list</span>(</span>
<span id="cb31-88"><a href="#cb31-88" aria-hidden="true" tabindex="-1"></a>        <span class="at">clusters =</span> clusters,</span>
<span id="cb31-89"><a href="#cb31-89" aria-hidden="true" tabindex="-1"></a>        <span class="at">local_i =</span> local_moran[, <span class="st">"Ii"</span>],</span>
<span id="cb31-90"><a href="#cb31-90" aria-hidden="true" tabindex="-1"></a>        <span class="at">p_values =</span> local_moran[, <span class="st">"Pr(z != E(Ii))"</span>]</span>
<span id="cb31-91"><a href="#cb31-91" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb31-92"><a href="#cb31-92" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb31-93"><a href="#cb31-93" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(lisa_results) <span class="ot">&lt;-</span> metrics_to_analyze</span>
<span id="cb31-94"><a href="#cb31-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-95"><a href="#cb31-95" aria-hidden="true" tabindex="-1"></a><span class="co"># 6. Create LISA maps</span></span>
<span id="cb31-96"><a href="#cb31-96" aria-hidden="true" tabindex="-1"></a><span class="co"># Purpose: Visualize spatial clusters and outliers</span></span>
<span id="cb31-97"><a href="#cb31-97" aria-hidden="true" tabindex="-1"></a><span class="co"># Output: ggplot maps for each metric</span></span>
<span id="cb31-98"><a href="#cb31-98" aria-hidden="true" tabindex="-1"></a>lisa_maps <span class="ot">&lt;-</span> <span class="fu">lapply</span>(metrics_to_analyze, <span class="cf">function</span>(metric) {</span>
<span id="cb31-99"><a href="#cb31-99" aria-hidden="true" tabindex="-1"></a>    district_metrics<span class="sc">$</span>cluster <span class="ot">&lt;-</span> lisa_results[[metric]]<span class="sc">$</span>clusters</span>
<span id="cb31-100"><a href="#cb31-100" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb31-101"><a href="#cb31-101" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(district_metrics) <span class="sc">+</span></span>
<span id="cb31-102"><a href="#cb31-102" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> cluster)) <span class="sc">+</span></span>
<span id="cb31-103"><a href="#cb31-103" aria-hidden="true" tabindex="-1"></a>        <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb31-104"><a href="#cb31-104" aria-hidden="true" tabindex="-1"></a>            <span class="st">"High-High"</span> <span class="ot">=</span> <span class="st">"#FF0000"</span>,    <span class="co"># Hot spots (red)</span></span>
<span id="cb31-105"><a href="#cb31-105" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Low-Low"</span> <span class="ot">=</span> <span class="st">"#0000FF"</span>,      <span class="co"># Cold spots (blue)</span></span>
<span id="cb31-106"><a href="#cb31-106" aria-hidden="true" tabindex="-1"></a>            <span class="st">"High-Low"</span> <span class="ot">=</span> <span class="st">"#FF69B4"</span>,     <span class="co"># High outliers (pink)</span></span>
<span id="cb31-107"><a href="#cb31-107" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Low-High"</span> <span class="ot">=</span> <span class="st">"#87CEEB"</span>,     <span class="co"># Low outliers (light blue)</span></span>
<span id="cb31-108"><a href="#cb31-108" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Not Significant"</span> <span class="ot">=</span> <span class="st">"#CCCCCC"</span> <span class="co"># Not significant (gray)</span></span>
<span id="cb31-109"><a href="#cb31-109" aria-hidden="true" tabindex="-1"></a>        )) <span class="sc">+</span></span>
<span id="cb31-110"><a href="#cb31-110" aria-hidden="true" tabindex="-1"></a>        <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb31-111"><a href="#cb31-111" aria-hidden="true" tabindex="-1"></a>        <span class="fu">labs</span>(</span>
<span id="cb31-112"><a href="#cb31-112" aria-hidden="true" tabindex="-1"></a>            <span class="at">title =</span> <span class="fu">paste</span>(<span class="st">"LISA Cluster Map:"</span>, <span class="fu">gsub</span>(<span class="st">"_"</span>, <span class="st">" "</span>, metric)),</span>
<span id="cb31-113"><a href="#cb31-113" aria-hidden="true" tabindex="-1"></a>            <span class="at">fill =</span> <span class="st">"Cluster Type"</span></span>
<span id="cb31-114"><a href="#cb31-114" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb31-115"><a href="#cb31-115" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb31-116"><a href="#cb31-116" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(lisa_maps) <span class="ot">&lt;-</span> metrics_to_analyze</span>
<span id="cb31-117"><a href="#cb31-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-118"><a href="#cb31-118" aria-hidden="true" tabindex="-1"></a><span class="co"># 7. Display maps</span></span>
<span id="cb31-119"><a href="#cb31-119" aria-hidden="true" tabindex="-1"></a><span class="co"># Print individual maps for each metric</span></span>
<span id="cb31-120"><a href="#cb31-120" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(lisa_maps<span class="sc">$</span>school_density)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Takehome_Ex3_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(lisa_maps<span class="sc">$</span>elementary_density)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Takehome_Ex3_files/figure-html/unnamed-chunk-24-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(lisa_maps<span class="sc">$</span>junior_high_density)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Takehome_Ex3_files/figure-html/unnamed-chunk-24-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(lisa_maps<span class="sc">$</span>senior_high_density)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Takehome_Ex3_files/figure-html/unnamed-chunk-24-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(lisa_maps<span class="sc">$</span>special_ed_density)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Takehome_Ex3_files/figure-html/unnamed-chunk-24-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(lisa_maps<span class="sc">$</span>public_ratio)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Takehome_Ex3_files/figure-html/unnamed-chunk-24-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a summary of LISA cluster patterns for each metric</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>lisa_summary <span class="ot">&lt;-</span> <span class="fu">lapply</span>(metrics_to_analyze, <span class="cf">function</span>(metric) {</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get cluster counts</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    cluster_counts <span class="ot">&lt;-</span> <span class="fu">table</span>(lisa_results[[metric]]<span class="sc">$</span>clusters)</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate percentages</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>    cluster_percentages <span class="ot">&lt;-</span> <span class="fu">prop.table</span>(cluster_counts) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Identify significant districts</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>    significant_districts <span class="ot">&lt;-</span> district_metrics<span class="sc">$</span>district[lisa_results[[metric]]<span class="sc">$</span>clusters <span class="sc">!=</span> <span class="st">"Not Significant"</span>]</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate global Moran's I</span></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>    global_moran <span class="ot">&lt;-</span> <span class="fu">moran.test</span>(district_metrics[[metric]], district_weights)</span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Return summary</span></span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(</span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">metric =</span> metric,</span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">cluster_counts =</span> cluster_counts,</span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">cluster_percentages =</span> cluster_percentages,</span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">significant_districts =</span> significant_districts,</span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">global_moran =</span> global_moran</span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(lisa_summary) <span class="ot">&lt;-</span> metrics_to_analyze</span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-26"><a href="#cb37-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Print comprehensive analysis for each metric</span></span>
<span id="cb37-27"><a href="#cb37-27" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(metric <span class="cf">in</span> metrics_to_analyze) {</span>
<span id="cb37-28"><a href="#cb37-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n\n</span><span class="st">=== Analysis for"</span>, <span class="fu">gsub</span>(<span class="st">"_"</span>, <span class="st">" "</span>, metric), <span class="st">"===</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb37-29"><a href="#cb37-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-30"><a href="#cb37-30" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Global spatial autocorrelation</span></span>
<span id="cb37-31"><a href="#cb37-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Global Moran's I:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb37-32"><a href="#cb37-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Value:"</span>, <span class="fu">round</span>(lisa_summary[[metric]]<span class="sc">$</span>global_moran<span class="sc">$</span>estimate[<span class="dv">1</span>], <span class="dv">4</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb37-33"><a href="#cb37-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"p-value:"</span>, <span class="fu">round</span>(lisa_summary[[metric]]<span class="sc">$</span>global_moran<span class="sc">$</span>p.value, <span class="dv">4</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb37-34"><a href="#cb37-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-35"><a href="#cb37-35" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Cluster distribution</span></span>
<span id="cb37-36"><a href="#cb37-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Cluster Distribution:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb37-37"><a href="#cb37-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">round</span>(lisa_summary[[metric]]<span class="sc">$</span>cluster_percentages, <span class="dv">2</span>))</span>
<span id="cb37-38"><a href="#cb37-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-39"><a href="#cb37-39" aria-hidden="true" tabindex="-1"></a>    <span class="co"># List significant clusters</span></span>
<span id="cb37-40"><a href="#cb37-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Significant Districts:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb37-41"><a href="#cb37-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(district <span class="cf">in</span> lisa_summary[[metric]]<span class="sc">$</span>significant_districts) {</span>
<span id="cb37-42"><a href="#cb37-42" aria-hidden="true" tabindex="-1"></a>        cluster_type <span class="ot">&lt;-</span> lisa_results[[metric]]<span class="sc">$</span>clusters[district_metrics<span class="sc">$</span>district <span class="sc">==</span> district]</span>
<span id="cb37-43"><a href="#cb37-43" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">"%s: %s</span><span class="sc">\n</span><span class="st">"</span>, district, cluster_type))</span>
<span id="cb37-44"><a href="#cb37-44" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb37-45"><a href="#cb37-45" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>

=== Analysis for school density ===

Global Moran's I:
Value: 0.2536 
p-value: 0.0013 

Cluster Distribution:

      High-High        Low-High Not Significant 
           7.14            4.76           88.10 

Significant Districts:
Kec. Cempaka Putih: High-High
Kec. Gambir: Low-High
Kec. Johar Baru: High-High
Kec. Senen: High-High
Kec. Pademangan: Low-High


=== Analysis for elementary density ===

Global Moran's I:
Value: 0.2306 
p-value: 0.0024 

Cluster Distribution:

      High-High        Low-High Not Significant 
           4.76            7.14           88.10 

Significant Districts:
Kec. Cempaka Putih: Low-High
Kec. Gambir: Low-High
Kec. Johar Baru: High-High
Kec. Senen: High-High
Kec. Pademangan: Low-High


=== Analysis for junior high density ===

Global Moran's I:
Value: 0.2588 
p-value: 0.0011 

Cluster Distribution:

      High-High        Low-High         Low-Low Not Significant 
           7.14            4.76            2.38           85.71 

Significant Districts:
Kec. Gambir: High-High
Kec. Johar Baru: High-High
Kec. Senen: High-High
Kec. Kramat Jati: Low-Low
Kec. Pademangan: Low-High
Kec. Penjaringan: Low-High


=== Analysis for senior high density ===

Global Moran's I:
Value: 0.2148 
p-value: 0.0051 

Cluster Distribution:

      High-High        Low-High Not Significant 
           9.52            2.38           88.10 

Significant Districts:
Kec. Cempaka Putih: High-High
Kec. Gambir: High-High
Kec. Sawah Besar: High-High
Kec. Senen: High-High
Kec. Pademangan: Low-High


=== Analysis for special ed density ===

Global Moran's I:
Value: -0.0218 
p-value: 0.4891 

Cluster Distribution:

       High-Low        Low-High Not Significant 
           2.38            2.38           95.24 

Significant Districts:
Kec. Kemayoran: High-Low
Kec. Jatinegara: Low-High


=== Analysis for public ratio ===

Global Moran's I:
Value: 0.2126 
p-value: 0.0053 

Cluster Distribution:

      High-High        High-Low         Low-Low Not Significant 
           2.38            4.76            7.14           85.71 

Significant Districts:
Kec. Cengkareng: Low-Low
Kec. Gambir: Low-Low
Kec. Kramat Jati: High-High
Kec. Koja: High-Low
Kec. Pademangan: High-Low
Kec. Penjaringan: Low-Low</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create numeric dataframe for correlation</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>metric_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">school_density =</span> <span class="fu">as.numeric</span>(district_metrics<span class="sc">$</span>school_density),</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">elementary_density =</span> <span class="fu">as.numeric</span>(district_metrics<span class="sc">$</span>elementary_density),</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">junior_high_density =</span> <span class="fu">as.numeric</span>(district_metrics<span class="sc">$</span>junior_high_density),</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">senior_high_density =</span> <span class="fu">as.numeric</span>(district_metrics<span class="sc">$</span>senior_high_density),</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">special_ed_density =</span> <span class="fu">as.numeric</span>(district_metrics<span class="sc">$</span>special_ed_density),</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">public_ratio =</span> <span class="fu">as.numeric</span>(district_metrics<span class="sc">$</span>public_ratio)</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate correlation matrix</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>correlation_matrix <span class="ot">&lt;-</span> <span class="fu">cor</span>(metric_data, <span class="at">use =</span> <span class="st">"complete.obs"</span>)</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">round</span>(correlation_matrix, <span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                    school_density elementary_density junior_high_density
school_density               1.000              0.978               0.898
elementary_density           0.978              1.000               0.817
junior_high_density          0.898              0.817               1.000
senior_high_density          0.849              0.740               0.803
special_ed_density           0.306              0.266               0.211
public_ratio                 0.150              0.284              -0.151
                    senior_high_density special_ed_density public_ratio
school_density                    0.849              0.306        0.150
elementary_density                0.740              0.266        0.284
junior_high_density               0.803              0.211       -0.151
senior_high_density               1.000              0.324       -0.102
special_ed_density                0.324              1.000        0.175
public_ratio                     -0.102              0.175        1.000</code></pre>
</div>
</div>
<section id="key-findings-from-spatial-analysis" class="level2">
<h2 class="anchored" data-anchor-id="key-findings-from-spatial-analysis">Key Findings from Spatial Analysis</h2>
<ul>
<li>All school density metrics (except special education) show significant positive spatial autocorrelation (p &lt; 0.01)</li>
<li>Strongest clustering in:
<ul>
<li>Junior high density (Moran’s I = 0.2588, p = 0.0011)</li>
<li>Overall school density (Moran’s I = 0.2536, p = 0.0013)</li>
</ul></li>
<li>Special education shows no significant spatial pattern (Moran’s I = -0.0218, p = 0.4891)</li>
</ul>
</section>
<section id="cluster-patterns" class="level2">
<h2 class="anchored" data-anchor-id="cluster-patterns">Cluster Patterns</h2>
<ul>
<li>Central Jakarta districts consistently form hot spots:
<ul>
<li>Senen appears as High-High in school, elementary, junior high, and senior high density</li>
<li>Gambir shifts from Low-High in elementary to High-High in junior and senior high</li>
<li>Cempaka Putih shows mixed patterns across different school levels</li>
</ul></li>
<li>Pademangan consistently appears as a Low-High outlier across multiple metrics</li>
<li>Very few High-Low outliers except in public ratio distribution</li>
</ul>
</section>
<section id="correlation-analysis" class="level2">
<h2 class="anchored" data-anchor-id="correlation-analysis">Correlation Analysis</h2>
<p><strong>Strong correlations:</strong></p>
<ul>
<li><p>Elementary and overall school density (r = 0.978)</p></li>
<li><p>Junior high and overall school density (r = 0.898)</p></li>
<li><p>Senior high and overall school density (r = 0.849)</p></li>
</ul>
<p><strong>Weak correlations:</strong></p>
<ul>
<li><p>Special education density with all other metrics (r &lt; 0.35)</p></li>
<li><p>Public ratio with all density metrics (r ranges from -0.151 to 0.284)</p></li>
</ul>
</section>
</section>
<section id="getis-ord-g" class="level1">
<h1>Getis-Ord G*</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate Getis-Ord G* statistics for each metric</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>calculate_g_star <span class="ot">&lt;-</span> <span class="cf">function</span>(x, weights) {</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Standardize the variable</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    x_std <span class="ot">&lt;-</span> <span class="fu">scale</span>(x)</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate G* statistic</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>    g_star <span class="ot">&lt;-</span> <span class="fu">lag.listw</span>(weights, x) <span class="sc">/</span> <span class="fu">scale</span>(x)[,<span class="dv">1</span>]</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate z-scores</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>    n <span class="ot">&lt;-</span> <span class="fu">length</span>(x)</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>    W <span class="ot">&lt;-</span> <span class="fu">listw2mat</span>(weights)</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>    W2 <span class="ot">&lt;-</span> W <span class="sc">*</span> W</span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>    S1 <span class="ot">&lt;-</span> <span class="fu">sum</span>(W2)</span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>    mean_g <span class="ot">&lt;-</span> <span class="fu">sum</span>(W <span class="sc">%*%</span> x) <span class="sc">/</span> n</span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>    var_g <span class="ot">&lt;-</span> S1 <span class="sc">*</span> (n <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">/</span> (n <span class="sc">*</span> n <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>    z_scores <span class="ot">&lt;-</span> (g_star <span class="sc">-</span> mean_g) <span class="sc">/</span> <span class="fu">sqrt</span>(var_g)</span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate p-values</span></span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>    p_values <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">pnorm</span>(<span class="sc">-</span><span class="fu">abs</span>(z_scores))</span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Classify hot and cold spots</span></span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true" tabindex="-1"></a>    classification <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"Not Significant"</span>, <span class="fu">length</span>(z_scores))</span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true" tabindex="-1"></a>    classification[z_scores <span class="sc">&gt;</span> <span class="fl">1.96</span> <span class="sc">&amp;</span> p_values <span class="sc">&lt;</span> <span class="fl">0.05</span>] <span class="ot">&lt;-</span> <span class="st">"Hot Spot (95%)"</span></span>
<span id="cb41-25"><a href="#cb41-25" aria-hidden="true" tabindex="-1"></a>    classification[z_scores <span class="sc">&gt;</span> <span class="fl">2.58</span> <span class="sc">&amp;</span> p_values <span class="sc">&lt;</span> <span class="fl">0.01</span>] <span class="ot">&lt;-</span> <span class="st">"Hot Spot (99%)"</span></span>
<span id="cb41-26"><a href="#cb41-26" aria-hidden="true" tabindex="-1"></a>    classification[z_scores <span class="sc">&lt;</span> <span class="sc">-</span><span class="fl">1.96</span> <span class="sc">&amp;</span> p_values <span class="sc">&lt;</span> <span class="fl">0.05</span>] <span class="ot">&lt;-</span> <span class="st">"Cold Spot (95%)"</span></span>
<span id="cb41-27"><a href="#cb41-27" aria-hidden="true" tabindex="-1"></a>    classification[z_scores <span class="sc">&lt;</span> <span class="sc">-</span><span class="fl">2.58</span> <span class="sc">&amp;</span> p_values <span class="sc">&lt;</span> <span class="fl">0.01</span>] <span class="ot">&lt;-</span> <span class="st">"Cold Spot (99%)"</span></span>
<span id="cb41-28"><a href="#cb41-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb41-29"><a href="#cb41-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">list</span>(</span>
<span id="cb41-30"><a href="#cb41-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">g_star =</span> g_star,</span>
<span id="cb41-31"><a href="#cb41-31" aria-hidden="true" tabindex="-1"></a>        <span class="at">z_scores =</span> z_scores,</span>
<span id="cb41-32"><a href="#cb41-32" aria-hidden="true" tabindex="-1"></a>        <span class="at">p_values =</span> p_values,</span>
<span id="cb41-33"><a href="#cb41-33" aria-hidden="true" tabindex="-1"></a>        <span class="at">classification =</span> classification</span>
<span id="cb41-34"><a href="#cb41-34" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb41-35"><a href="#cb41-35" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb41-36"><a href="#cb41-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-37"><a href="#cb41-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply G* analysis to each metric</span></span>
<span id="cb41-38"><a href="#cb41-38" aria-hidden="true" tabindex="-1"></a>g_star_results <span class="ot">&lt;-</span> <span class="fu">lapply</span>(metrics_to_analyze, <span class="cf">function</span>(metric) {</span>
<span id="cb41-39"><a href="#cb41-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">calculate_g_star</span>(district_metrics[[metric]], district_weights)</span>
<span id="cb41-40"><a href="#cb41-40" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb41-41"><a href="#cb41-41" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(g_star_results) <span class="ot">&lt;-</span> metrics_to_analyze</span>
<span id="cb41-42"><a href="#cb41-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-43"><a href="#cb41-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Create maps for G* results</span></span>
<span id="cb41-44"><a href="#cb41-44" aria-hidden="true" tabindex="-1"></a>g_star_maps <span class="ot">&lt;-</span> <span class="fu">lapply</span>(metrics_to_analyze, <span class="cf">function</span>(metric) {</span>
<span id="cb41-45"><a href="#cb41-45" aria-hidden="true" tabindex="-1"></a>    district_metrics<span class="sc">$</span>hot_cold <span class="ot">&lt;-</span> g_star_results[[metric]]<span class="sc">$</span>classification</span>
<span id="cb41-46"><a href="#cb41-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb41-47"><a href="#cb41-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(district_metrics) <span class="sc">+</span></span>
<span id="cb41-48"><a href="#cb41-48" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> hot_cold)) <span class="sc">+</span></span>
<span id="cb41-49"><a href="#cb41-49" aria-hidden="true" tabindex="-1"></a>        <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb41-50"><a href="#cb41-50" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Hot Spot (99%)"</span> <span class="ot">=</span> <span class="st">"#FF0000"</span>,</span>
<span id="cb41-51"><a href="#cb41-51" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Hot Spot (95%)"</span> <span class="ot">=</span> <span class="st">"#FF6666"</span>,</span>
<span id="cb41-52"><a href="#cb41-52" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Cold Spot (99%)"</span> <span class="ot">=</span> <span class="st">"#0000FF"</span>,</span>
<span id="cb41-53"><a href="#cb41-53" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Cold Spot (95%)"</span> <span class="ot">=</span> <span class="st">"#6666FF"</span>,</span>
<span id="cb41-54"><a href="#cb41-54" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Not Significant"</span> <span class="ot">=</span> <span class="st">"#CCCCCC"</span></span>
<span id="cb41-55"><a href="#cb41-55" aria-hidden="true" tabindex="-1"></a>        )) <span class="sc">+</span></span>
<span id="cb41-56"><a href="#cb41-56" aria-hidden="true" tabindex="-1"></a>        <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb41-57"><a href="#cb41-57" aria-hidden="true" tabindex="-1"></a>        <span class="fu">labs</span>(</span>
<span id="cb41-58"><a href="#cb41-58" aria-hidden="true" tabindex="-1"></a>            <span class="at">title =</span> <span class="fu">paste</span>(<span class="st">"Hot Spot Analysis:"</span>, <span class="fu">gsub</span>(<span class="st">"_"</span>, <span class="st">" "</span>, metric)),</span>
<span id="cb41-59"><a href="#cb41-59" aria-hidden="true" tabindex="-1"></a>            <span class="at">subtitle =</span> <span class="st">"Getis-Ord G* Statistics"</span>,</span>
<span id="cb41-60"><a href="#cb41-60" aria-hidden="true" tabindex="-1"></a>            <span class="at">fill =</span> <span class="st">"Significance Level"</span></span>
<span id="cb41-61"><a href="#cb41-61" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb41-62"><a href="#cb41-62" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb41-63"><a href="#cb41-63" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(g_star_maps) <span class="ot">&lt;-</span> metrics_to_analyze</span>
<span id="cb41-64"><a href="#cb41-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-65"><a href="#cb41-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Print maps</span></span>
<span id="cb41-66"><a href="#cb41-66" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(metric <span class="cf">in</span> metrics_to_analyze) {</span>
<span id="cb41-67"><a href="#cb41-67" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(g_star_maps[[metric]])</span>
<span id="cb41-68"><a href="#cb41-68" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Takehome_Ex3_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Takehome_Ex3_files/figure-html/unnamed-chunk-26-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Takehome_Ex3_files/figure-html/unnamed-chunk-26-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Takehome_Ex3_files/figure-html/unnamed-chunk-26-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Takehome_Ex3_files/figure-html/unnamed-chunk-26-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Takehome_Ex3_files/figure-html/unnamed-chunk-26-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print summary statistics</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(metric <span class="cf">in</span> metrics_to_analyze) {</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n\n</span><span class="st">=== Hot Spot Analysis for"</span>, <span class="fu">gsub</span>(<span class="st">"_"</span>, <span class="st">" "</span>, metric), <span class="st">"===</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Print cluster counts</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>    cluster_counts <span class="ot">&lt;-</span> <span class="fu">table</span>(g_star_results[[metric]]<span class="sc">$</span>classification)</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>    cluster_percentages <span class="ot">&lt;-</span> <span class="fu">prop.table</span>(cluster_counts) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Cluster Distribution:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">round</span>(cluster_percentages, <span class="dv">2</span>))</span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># List significant districts</span></span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Significant Districts:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>    sig_districts <span class="ot">&lt;-</span> district_metrics<span class="sc">$</span>district[g_star_results[[metric]]<span class="sc">$</span>classification <span class="sc">!=</span> <span class="st">"Not Significant"</span>]</span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>    sig_types <span class="ot">&lt;-</span> g_star_results[[metric]]<span class="sc">$</span>classification[g_star_results[[metric]]<span class="sc">$</span>classification <span class="sc">!=</span> <span class="st">"Not Significant"</span>]</span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_along</span>(sig_districts)) {</span>
<span id="cb42-18"><a href="#cb42-18" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">"%s: %s</span><span class="sc">\n</span><span class="st">"</span>, sig_districts[i], sig_types[i]))</span>
<span id="cb42-19"><a href="#cb42-19" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb42-20"><a href="#cb42-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb42-21"><a href="#cb42-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Print range of z-scores</span></span>
<span id="cb42-22"><a href="#cb42-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Z-score range:"</span>, </span>
<span id="cb42-23"><a href="#cb42-23" aria-hidden="true" tabindex="-1"></a>        <span class="fu">round</span>(<span class="fu">min</span>(g_star_results[[metric]]<span class="sc">$</span>z_scores), <span class="dv">3</span>), <span class="st">"to"</span>,</span>
<span id="cb42-24"><a href="#cb42-24" aria-hidden="true" tabindex="-1"></a>        <span class="fu">round</span>(<span class="fu">max</span>(g_star_results[[metric]]<span class="sc">$</span>z_scores), <span class="dv">3</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb42-25"><a href="#cb42-25" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>

=== Hot Spot Analysis for school density ===

Cluster Distribution:

Cold Spot (99%)  Hot Spot (99%) Not Significant 
          76.19           21.43            2.38 

Significant Districts:
Kec. Cengkareng: Cold Spot (99%)
Kec. Grogol Petamburan: Hot Spot (99%)
Kec. Kali Deres: Cold Spot (99%)
Kec. Kebon Jeruk: Cold Spot (99%)
Kec. Kembangan: Cold Spot (99%)
Kec. Palmerah: Hot Spot (99%)
Kec. Taman Sari: Cold Spot (99%)
Kec. Tambora: Cold Spot (99%)
Kec. Cempaka Putih: Hot Spot (99%)
Kec. Gambir: Cold Spot (99%)
Kec. Johar Baru: Cold Spot (99%)
Kec. Kemayoran: Cold Spot (99%)
Kec. Menteng: Cold Spot (99%)
Kec. Sawah Besar: Hot Spot (99%)
Kec. Tanah Abang: Cold Spot (99%)
Kec. Cilandak: Cold Spot (99%)
Kec. Jagakarsa: Cold Spot (99%)
Kec. Kebayoran Baru: Cold Spot (99%)
Kec. Kebayoran Lama: Cold Spot (99%)
Kec. Mampang Prapatan: Cold Spot (99%)
Kec. Pancoran: Cold Spot (99%)
Kec. Pasar Minggu: Cold Spot (99%)
Kec. Pesanggrahan: Cold Spot (99%)
Kec. Setia Budi: Cold Spot (99%)
Kec. Tebet: Hot Spot (99%)
Kec. Cakung: Cold Spot (99%)
Kec. Cipayung: Cold Spot (99%)
Kec. Ciracas: Cold Spot (99%)
Kec. Duren Sawit: Hot Spot (99%)
Kec. Jatinegara: Hot Spot (99%)
Kec. Kramat Jati: Cold Spot (99%)
Kec. Makasar: Cold Spot (99%)
Kec. Matraman: Cold Spot (99%)
Kec. Pasar Rebo: Cold Spot (99%)
Kec. Pulo Gadung: Hot Spot (99%)
Kec. Cilincing: Cold Spot (99%)
Kec. Kelapa Gading: Cold Spot (99%)
Kec. Koja: Hot Spot (99%)
Kec. Pademangan: Cold Spot (99%)
Kec. Penjaringan: Cold Spot (99%)
Kec. Tanjung Priok: Cold Spot (99%)

Z-score range: -939.718 to 721.451 


=== Hot Spot Analysis for elementary density ===

Cluster Distribution:

Cold Spot (95%) Cold Spot (99%)  Hot Spot (99%) Not Significant 
           2.38           76.19           14.29            7.14 

Significant Districts:
Kec. Cengkareng: Cold Spot (99%)
Kec. Grogol Petamburan: Hot Spot (99%)
Kec. Kali Deres: Cold Spot (99%)
Kec. Kebon Jeruk: Cold Spot (99%)
Kec. Kembangan: Cold Spot (99%)
Kec. Palmerah: Hot Spot (99%)
Kec. Tambora: Cold Spot (99%)
Kec. Cempaka Putih: Cold Spot (99%)
Kec. Gambir: Cold Spot (99%)
Kec. Johar Baru: Cold Spot (99%)
Kec. Kemayoran: Cold Spot (99%)
Kec. Menteng: Cold Spot (99%)
Kec. Sawah Besar: Hot Spot (99%)
Kec. Tanah Abang: Cold Spot (99%)
Kec. Cilandak: Cold Spot (99%)
Kec. Jagakarsa: Cold Spot (99%)
Kec. Kebayoran Baru: Cold Spot (99%)
Kec. Kebayoran Lama: Cold Spot (99%)
Kec. Mampang Prapatan: Cold Spot (99%)
Kec. Pancoran: Cold Spot (99%)
Kec. Pasar Minggu: Cold Spot (99%)
Kec. Pesanggrahan: Cold Spot (99%)
Kec. Setia Budi: Cold Spot (99%)
Kec. Tebet: Hot Spot (99%)
Kec. Cakung: Cold Spot (99%)
Kec. Cipayung: Cold Spot (99%)
Kec. Ciracas: Cold Spot (99%)
Kec. Duren Sawit: Hot Spot (99%)
Kec. Jatinegara: Hot Spot (99%)
Kec. Kramat Jati: Cold Spot (99%)
Kec. Makasar: Cold Spot (99%)
Kec. Matraman: Cold Spot (95%)
Kec. Pasar Rebo: Cold Spot (99%)
Kec. Pulo Gadung: Cold Spot (99%)
Kec. Cilincing: Cold Spot (99%)
Kec. Kelapa Gading: Cold Spot (99%)
Kec. Pademangan: Cold Spot (99%)
Kec. Penjaringan: Cold Spot (99%)
Kec. Tanjung Priok: Cold Spot (99%)

Z-score range: -117.542 to 103.285 


=== Hot Spot Analysis for junior high density ===

Cluster Distribution:

Cold Spot (99%)  Hot Spot (99%) Not Significant 
          64.29           14.29           21.43 

Significant Districts:
Kec. Cengkareng: Hot Spot (99%)
Kec. Kali Deres: Cold Spot (99%)
Kec. Kebon Jeruk: Hot Spot (99%)
Kec. Kembangan: Cold Spot (99%)
Kec. Palmerah: Cold Spot (99%)
Kec. Tambora: Cold Spot (99%)
Kec. Gambir: Hot Spot (99%)
Kec. Menteng: Cold Spot (99%)
Kec. Tanah Abang: Cold Spot (99%)
Kec. Cilandak: Cold Spot (99%)
Kec. Jagakarsa: Cold Spot (99%)
Kec. Kebayoran Baru: Cold Spot (99%)
Kec. Kebayoran Lama: Cold Spot (99%)
Kec. Mampang Prapatan: Cold Spot (99%)
Kec. Pancoran: Cold Spot (99%)
Kec. Pasar Minggu: Cold Spot (99%)
Kec. Pesanggrahan: Cold Spot (99%)
Kec. Setia Budi: Cold Spot (99%)
Kec. Tebet: Hot Spot (99%)
Kec. Cakung: Cold Spot (99%)
Kec. Cipayung: Cold Spot (99%)
Kec. Ciracas: Cold Spot (99%)
Kec. Duren Sawit: Cold Spot (99%)
Kec. Kramat Jati: Cold Spot (99%)
Kec. Makasar: Cold Spot (99%)
Kec. Matraman: Hot Spot (99%)
Kec. Pasar Rebo: Cold Spot (99%)
Kec. Pulo Gadung: Hot Spot (99%)
Kec. Cilincing: Cold Spot (99%)
Kec. Kelapa Gading: Cold Spot (99%)
Kec. Pademangan: Cold Spot (99%)
Kec. Penjaringan: Cold Spot (99%)
Kec. Tanjung Priok: Cold Spot (99%)

Z-score range: -2152.013 to 80.335 


=== Hot Spot Analysis for senior high density ===

Cluster Distribution:

Cold Spot (95%) Cold Spot (99%)  Hot Spot (95%)  Hot Spot (99%) Not Significant 
           4.76           54.76            4.76           26.19            9.52 

Significant Districts:
Kec. Cengkareng: Cold Spot (99%)
Kec. Kali Deres: Cold Spot (99%)
Kec. Kebon Jeruk: Cold Spot (99%)
Kec. Kembangan: Cold Spot (99%)
Kec. Palmerah: Hot Spot (95%)
Kec. Tambora: Cold Spot (95%)
Kec. Cempaka Putih: Hot Spot (99%)
Kec. Gambir: Hot Spot (99%)
Kec. Johar Baru: Hot Spot (99%)
Kec. Menteng: Hot Spot (99%)
Kec. Sawah Besar: Hot Spot (95%)
Kec. Tanah Abang: Cold Spot (99%)
Kec. Cilandak: Cold Spot (99%)
Kec. Jagakarsa: Cold Spot (99%)
Kec. Kebayoran Baru: Hot Spot (99%)
Kec. Kebayoran Lama: Cold Spot (99%)
Kec. Mampang Prapatan: Cold Spot (99%)
Kec. Pancoran: Cold Spot (99%)
Kec. Pasar Minggu: Cold Spot (99%)
Kec. Pesanggrahan: Cold Spot (99%)
Kec. Setia Budi: Cold Spot (99%)
Kec. Tebet: Hot Spot (99%)
Kec. Cakung: Cold Spot (99%)
Kec. Cipayung: Cold Spot (99%)
Kec. Ciracas: Cold Spot (99%)
Kec. Duren Sawit: Hot Spot (99%)
Kec. Jatinegara: Hot Spot (99%)
Kec. Kramat Jati: Cold Spot (99%)
Kec. Makasar: Cold Spot (99%)
Kec. Matraman: Cold Spot (95%)
Kec. Pasar Rebo: Hot Spot (99%)
Kec. Pulo Gadung: Hot Spot (99%)
Kec. Cilincing: Cold Spot (99%)
Kec. Kelapa Gading: Cold Spot (99%)
Kec. Koja: Hot Spot (99%)
Kec. Pademangan: Cold Spot (99%)
Kec. Penjaringan: Cold Spot (99%)
Kec. Tanjung Priok: Cold Spot (99%)

Z-score range: -1891.829 to 55.52 


=== Hot Spot Analysis for special ed density ===

Cluster Distribution:

Cold Spot (95%)  Hot Spot (99%) Not Significant 
           2.38            9.52           88.10 

Significant Districts:
Kec. Menteng: Hot Spot (99%)
Kec. Jagakarsa: Cold Spot (95%)
Kec. Kebayoran Baru: Hot Spot (99%)
Kec. Kramat Jati: Hot Spot (99%)
Kec. Pasar Rebo: Hot Spot (99%)

Z-score range: -2.134 to 9.612 


=== Hot Spot Analysis for public ratio ===

Cluster Distribution:

Cold Spot (95%) Cold Spot (99%)  Hot Spot (99%) Not Significant 
           9.52           26.19            9.52           54.76 

Significant Districts:
Kec. Cengkareng: Cold Spot (95%)
Kec. Kali Deres: Cold Spot (95%)
Kec. Kebon Jeruk: Cold Spot (99%)
Kec. Kembangan: Cold Spot (99%)
Kec. Taman Sari: Cold Spot (95%)
Kec. Cempaka Putih: Cold Spot (99%)
Kec. Gambir: Cold Spot (99%)
Kec. Sawah Besar: Cold Spot (99%)
Kec. Senen: Cold Spot (99%)
Kec. Tanah Abang: Hot Spot (99%)
Kec. Cilandak: Cold Spot (99%)
Kec. Jagakarsa: Cold Spot (99%)
Kec. Kebayoran Baru: Cold Spot (99%)
Kec. Mampang Prapatan: Hot Spot (99%)
Kec. Pesanggrahan: Hot Spot (99%)
Kec. Cakung: Cold Spot (99%)
Kec. Duren Sawit: Hot Spot (99%)
Kec. Pulo Gadung: Cold Spot (95%)
Kec. Cilincing: Cold Spot (99%)

Z-score range: -34.473 to 19.211 </code></pre>
</div>
</div>
<section id="section-4" class="level2">
<h2 class="anchored" data-anchor-id="section-4"></h2>
</section>
<section id="analysis-of-school-distribution-patterns-in-jakarta" class="level2">
<h2 class="anchored" data-anchor-id="analysis-of-school-distribution-patterns-in-jakarta">Analysis of School Distribution Patterns in Jakarta</h2>
<section id="junior-high-senior-high-school-patterns" class="level3">
<h3 class="anchored" data-anchor-id="junior-high-senior-high-school-patterns">Junior High &amp; Senior High School Patterns</h3>
<ul>
<li><strong>Observed Pattern</strong>: Both show central concentration (hot spots) but senior high schools have a more dispersed pattern with more transition zones</li>
<li><strong>This could be because</strong>:
<ul>
<li>Junior high students typically travel shorter distances, requiring more evenly spread schools</li>
<li>Senior high schools might be larger facilities serving wider areas</li>
<li>Senior high schools might be more specialized (science, vocational, etc.) leading to more varied locations</li>
</ul></li>
</ul>
</section>
<section id="special-education-vs-regular-schools" class="level3">
<h3 class="anchored" data-anchor-id="special-education-vs-regular-schools">Special Education vs Regular Schools</h3>
<ul>
<li><strong>Observed Pattern</strong>: Special education shows minimal clustering with isolated hot spots, contrasting sharply with the clustered patterns of regular schools</li>
<li><strong>This could be because</strong>:
<ul>
<li>Special education facilities might be strategically placed to serve larger catchment areas</li>
<li>Each facility might be specialized for different needs, requiring broader distribution</li>
<li>Smaller target population might not require dense clustering</li>
</ul></li>
</ul>
</section>
<section id="public-school-ratio-distribution" class="level3">
<h3 class="anchored" data-anchor-id="public-school-ratio-distribution">Public School Ratio Distribution</h3>
<ul>
<li><strong>Observed Pattern</strong>: Western districts show significant cold spots (low public ratio), while public school hot spots are scattered</li>
<li><strong>This could be because</strong>:
<ul>
<li>Different administrative approaches to school provision across districts</li>
<li>Private schools might be filling gaps in certain areas
<ul>
<li>Historical development patterns of school establishment</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="transition-zones" class="level3">
<h3 class="anchored" data-anchor-id="transition-zones">Transition Zones</h3>
<ul>
<li><strong>Observed Pattern</strong>: Areas of “not significant” clustering often appear between hot and cold spots, particularly in senior high and public ratio maps</li>
</ul>
</section>
</section>
</section>
<section id="storyboard-jakarta-schools-spatial-analysis-dashboard" class="level1">
<h1>Storyboard: Jakarta Schools Spatial Analysis Dashboard</h1>
<section id="background-significance" class="level4">
<h4 class="anchored" data-anchor-id="background-significance">Background &amp; Significance</h4>
<p>The spatial distribution of schools across Jakarta, Indonesia’s capital city, represents a critical aspect of educational accessibility and urban planning. Our proposed web application aims to provide interactive spatial analysis tools that enable stakeholders to understand and optimize educational resource distribution through Local Indicators of Spatial Association (LISA) and Hot-Spot Cold-Spot Analysis (HCSA).</p>
</section>
<section id="motivation" class="level4">
<h4 class="anchored" data-anchor-id="motivation">Motivation</h4>
<p>This spatial analysis dashboard serves two critical purposes: identifying gaps in educational access across districts and providing data-driven insights for policy decisions.These capabilities directly enable stakeholders in:</p>
<ol type="1">
<li><p><strong>Achieving Educational Equity</strong></p>
<ul>
<li>Helps identify areas of educational resource concentration and scarcity</li>
<li>Reveals potential gaps in school accessibility across different districts</li>
<li>Supports evidence-based decision making for new school placement</li>
<li>Highlights disparities between public and private school distribution</li>
</ul></li>
<li><p><strong>Policy Implementation</strong></p>
<ul>
<li>Supports data-driven educational policy decisions</li>
<li>Identifies priority areas for educational infrastructure development</li>
<li>Helps evaluate the effectiveness of current school distribution policies</li>
<li>Facilitates monitoring of educational access initiatives</li>
</ul></li>
</ol>
</section>
</section>
<section id="ui-design" class="level1">
<h1>UI Design</h1>
<p>The latest interface design implementation can be accessed via the following link: <a href="https://zcchong415.shinyapps.io/Takehome_Ex3/" class="uri">https://zcchong415.shinyapps.io/Takehome_Ex3/</a></p>
<p>The corresponding source code and associated Shiny application files are located within the mockup directory on elearn.</p>
<section id="design-philosophy-objectives" class="level2">
<h2 class="anchored" data-anchor-id="design-philosophy-objectives">Design Philosophy &amp; Objectives</h2>
<section id="design-philosophy" class="level3">
<h3 class="anchored" data-anchor-id="design-philosophy">Design Philosophy</h3>
<p>The district-level spatial analysis interface integrates Local Indicators of Spatial Association (LISA) and Hot-Spot Cold-Spot Analysis (HCSA) methodologies to enable comprehensive understanding of educational facility distribution patterns across Jakarta’s districts, emphasizing analytical clarity while maintaining statistical rigor in the visualization and analysis process.</p>
</section>
<section id="core-design-objectives" class="level3">
<h3 class="anchored" data-anchor-id="core-design-objectives">Core Design Objectives</h3>
<ol type="1">
<li><p>The interface must deliver clear spatial visualizations that effectively communicate complex clustering patterns of educational facilities, enabling stakeholders to identify significant concentrations and gaps in educational resource distribution at the district level.</p></li>
<li><p>Statistical analysis tools need to be presented in an intuitive manner that allows users to seamlessly transition between LISA and HCSA methodologies while maintaining a clear understanding of the statistical significance and implications of their findings.</p></li>
<li><p>The visualization system must effectively represent cross-district relationships and boundary effects through clear color schemes and interactive elements, enabling users to understand how educational resource distribution patterns extend beyond individual district boundaries.</p></li>
<li><p>Parameter controls for both LISA and HCSA analyses must be designed to provide precise analytical control while remaining accessible to users with varying levels of statistical expertise, ensuring the interface serves both technical and policy-focused users.</p></li>
</ol>
</section>
<section id="interactive-components-controls" class="level3">
<h3 class="anchored" data-anchor-id="interactive-components-controls">Interactive Components &amp; Controls</h3>
<p>The interface incorporates three primary interactive control components designed to facilitate spatial analysis:</p>
<ol type="1">
<li><p><strong>Analysis Method Toggle</strong></p>
<p>- Enables users to switch between LISA and Hotspot (Getis-Ord) analysis methodologies</p>
<p>- Provides clear visual indication of currently selected analysis type</p></li>
<li><p><strong>Metric Selection</strong></p>
<p>- Offers multiple educational facility metrics for analysis</p>
<p>- Allows for single metric selection to maintain analysis clarity</p></li>
<li><p><strong>Significance Level Control</strong></p>
<p>- Enables adjustment of statistical significance threshold</p>
<p>- Includes visual feedback showing impact on result confidence</p>
<p>- Displays clear numerical representation of current significance level</p></li>
</ol>
</section>
</section>
<section id="layout-architecture---mock-up-1" class="level2">
<h2 class="anchored" data-anchor-id="layout-architecture---mock-up-1">Layout Architecture - Mock up 1</h2>
<section id="spatial-organization" class="level3">
<h3 class="anchored" data-anchor-id="spatial-organization">Spatial Organization</h3>
<p>The interface utilizes a two-panel design structure that optimizes the analytical workflow while maintaining clear visual hierarchy and relationships between interface elements:</p>
<pre><code>+------------------------------------------+
|          Jakarta Schools Analysis        |
+------------------------------------------+
|                |                         |
| Control Panel  |    Spatial              |
| • Analysis     |    Visualization        |
| • Metrics      |    Window               |
| • Parameters   |                         |
|                |                         |
| Analysis       |                         |
| Summary        |                         |
| • Statistics   |                         |
| • Results      |                         |
|                |                         |
|                |                         |
+----------------+-------------------------+</code></pre>
<p><img src="Mockup_1_LayoutArchitecture.PNG" class="img-fluid"></p>
<section id="component-relationships" class="level4">
<h4 class="anchored" data-anchor-id="component-relationships">Component Relationships</h4>
<p>The spatial organization of the interface establishes clear relationships between analytical elements through a hierarchical structure that guides users through the analysis process:</p>
<ol type="1">
<li><p>The Control Panel serves as the primary input interface, containing essential analysis parameters, metric selection options, and statistical controls that directly influence the spatial analysis visualization.</p></li>
<li><p>The Analysis Window occupies the majority of the interface space, providing a comprehensive view of district-level spatial patterns and clustering results through color-coded visualizations and interactive elements.</p></li>
<li><p>The Statistical Summary Panel provides contextual information and detailed metrics that support the interpretation of spatial patterns observed in the analysis window, offering both global and district-specific statistical measures.</p></li>
</ol>
</section>
</section>
<section id="control-panel-organization" class="level3">
<h3 class="anchored" data-anchor-id="control-panel-organization">Control Panel Organization</h3>
<p>The control panel implements a hierarchical organization that reflects the logical progression of spatial analysis.</p>
<pre class="plaintext"><code>+-----------------------------------+
|        Analysis Selection         |
|  Primary Method Choice            |
+-----------------------------------+
|        Metric Selection           |
|  Analysis Variable Choice         |
+-----------------------------------+
|      Significance Control         |
|  Statistical Parameter Tuning     |
+-----------------------------------+
|      Analysis Summary             |           
|                                   |
+-----------------------------------+</code></pre>
<p><img src="Mockup_1_Control_Panel.PNG" class="img-fluid" width="286"></p>
</section>
<section id="visualization-organization" class="level3">
<h3 class="anchored" data-anchor-id="visualization-organization">Visualization Organization</h3>
<p>The central visualization component consists of a single interactive map display that renders spatial analysis results for Jakarta’s districts</p>
<p><img src="Mockup_1_Visualization.PNG" class="img-fluid"></p>
</section>
</section>
<section id="layout-architecture---mock-up-2" class="level2">
<h2 class="anchored" data-anchor-id="layout-architecture---mock-up-2">Layout Architecture - Mock up 2</h2>
<section id="design-evolution-rationale" class="level3">
<h3 class="anchored" data-anchor-id="design-evolution-rationale">Design Evolution Rationale</h3>
<p>The second mockup iteration proposes a significant shift in how spatial analyses are presented, moving from a toggle-based single view to a simultaneous dual-view layout. This design decision is driven by several key insights:</p>
<ol type="1">
<li><strong>Comparative Analysis Enhancement</strong>
<ul>
<li>Displaying LISA and Hot-Spot analyses side by side enables immediate visual comparison</li>
<li>Reduces cognitive load by eliminating the need to mentally retain patterns while switching between views</li>
<li>Facilitates deeper understanding of how different spatial statistics complement each other</li>
</ul></li>
<li><strong>Workflow Efficiency</strong>
<ul>
<li>Eliminates the friction of switching between analysis types</li>
<li>Enables real-time parameter adjustments with immediate visual feedback across both methods</li>
<li>Streamlines the decision-making process by providing comprehensive spatial information at a glance</li>
</ul></li>
</ol>
</section>
<section id="proposed-layout-structure" class="level3">
<h3 class="anchored" data-anchor-id="proposed-layout-structure">Proposed Layout Structure</h3>
<pre><code>+------------------------------------------+
|          Jakarta Schools Analysis        |
+------------------------------------------+
|          |              |                |
| Control  |    LISA      |   Hot-Spot     |
| Panel    |    Analysis  |   Analysis     |
| (20%)    |    (40%)     |   (40%)        |
|          |              |                |
|          |              |                |
+----------+              |                |
| Summary  |              |                |
+------------------------------------------+</code></pre>
</section>
<section id="section-5" class="level3">
<h3 class="anchored" data-anchor-id="section-5"><img src="Mockup_2_diagram.PNG" class="img-fluid"></h3>
</section>
<section id="design-limitations-and-future-considerations" class="level3">
<h3 class="anchored" data-anchor-id="design-limitations-and-future-considerations">Design Limitations and Future Considerations</h3>
<p>While the side-by-side visualization approach offers valuable comparative insights, several significant limitations have emerged during testing:</p>
<ol type="1">
<li><strong>Map Size Constraints</strong>
<ul>
<li>Smaller map sizes make it difficult to discern fine details in Jakarta’s complex district structure</li>
<li>Reduced visualization area impacts the overall user experience when analyzing spatial patterns</li>
</ul></li>
</ol>
<p>Based on these findings, we will be returning to the single-map toggle design for the Jakarta schools analysis dashboard. However, the dual-view concept could be retained for future applications where rapid comparative analysis takes precedence over detailed spatial examination.</p>
</section>
</section>
<section id="layout-architecture---mock-up-3" class="level2">
<h2 class="anchored" data-anchor-id="layout-architecture---mock-up-3">Layout Architecture - Mock up 3</h2>
<section id="design-evolution-rationale-1" class="level3">
<h3 class="anchored" data-anchor-id="design-evolution-rationale-1">Design Evolution Rationale</h3>
<p>After evaluating the limitations of Mock-up 2’s side-by-side approach, Mock-up 3 returns to the successful single-map toggle design from Mock-up 1, while introducing a key structural improvement to enhance data comprehension and workflow efficiency.</p>
</section>
<section id="key-innovation-repositioned-summary-panel" class="level3">
<h3 class="anchored" data-anchor-id="key-innovation-repositioned-summary-panel">Key Innovation: Repositioned Summary Panel</h3>
<p>The primary modification in Mock-up 3 is the relocation of the statistical summary from within the control panel to a dedicated horizontal panel at the bottom of the interface. This design decision is driven by several important considerations:</p>
<ol type="1">
<li><strong>Enhanced Control Panel Focus</strong>
<ul>
<li>Provides room for potential additional control options</li>
<li>Improves overall readability of control parameters</li>
</ul></li>
<li><strong>Improved Data Context</strong>
<ul>
<li>Creates a natural “analysis flow” from top to bottom</li>
<li>Summary statistics become a conclusion rather than a sidebar</li>
<li>Facilitates easier comparison of statistics across different analysis states</li>
<li>Provides more horizontal space for detailed statistical presentations</li>
</ul></li>
</ol>
</section>
<section id="proposed-layout-structure-1" class="level3">
<h3 class="anchored" data-anchor-id="proposed-layout-structure-1">Proposed Layout Structure</h3>
<pre><code>+------------------------------------------+
|       Jakarta Schools Analysis           |
+------------------------------------------+
|            |                             |
| Analysis   |     Spatial Analysis        |
| Controls   |     Visualization           |
|            |     Window                  |
|            |                             |
|            |                             |
+------------+-----------------------------+
|           Statistical Summary            |
|                                          |
+------------------------------------------+</code></pre>
<p><img src="mockup_3_diagram.PNG" class="img-fluid"></p>
</section>
<section id="component-modifications" class="level3">
<h3 class="anchored" data-anchor-id="component-modifications">Component Modifications</h3>
<ol type="1">
<li><strong>Control Panel Refinements</strong>
<ul>
<li>More vertical space for interactive elements</li>
<li>Improved spacing between controls</li>
<li>Room for explanatory text or tooltips</li>
<li>Potential for additional analysis parameters</li>
</ul></li>
<li><strong>Summary Panel Design</strong>
<ul>
<li>Horizontal layout maximizes readable width for statistical data</li>
<li>Organized in clear sections for different types of statistics</li>
<li>Option for tabbed or segmented display of different statistical views</li>
<li>Space for data visualizations like small charts or graphs</li>
</ul></li>
<li><strong>Visual Hierarchy</strong>
<ul>
<li>Clear progression from input (controls) to output (map) to results (summary)</li>
<li>Maintains strong relationship between controls and visualization</li>
<li>Creates natural “story” flow for data analysis process</li>
</ul></li>
</ol>
<p>This revised layout maintains the successful elements of Mock-up 1 while improving the organization and presentation of statistical information. The horizontal summary panel provides a natural conclusion to the analysis workflow, enhancing both the user experience and the analytical process.</p>
</section>
</section>
</section>
<section id="references" class="level1">
<h1>References</h1>
<ul>
<li><p>Utilized Claude AI to clarify code concepts and refining responses.</p></li>
<li><p>Seniors’ learning from <a href="https://giniceseah.netlify.app/posts/2021-07-31-storyboard/" class="uri">https://giniceseah.netlify.app/posts/2021-07-31-storyboard/</a> and <a href="https://is415-gaa-project-group3.netlify.app/" class="uri">https://is415-gaa-project-group3.netlify.app/</a></p></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>