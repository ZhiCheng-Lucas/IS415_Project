---
title: "Take-home Exercise 1: Geographical distribution of Armed Conflict in Myanmar"
author: "Chong Zhi Cheng"
date: "September 16, 2024"
date-modified: "last-modified"
execute:
  eval: true
  echo: true
  freeze: true
  warning: false
---

## **Setting the Scene**

Millions of people have their lives shattered by armed conflict – wars – every year.

Armed conflict has been on the rise since about 2012, after a decline in the 1990s and early 2000s. First came conflicts in Libya, Syria and Yemen, triggered by the 2011 Arab uprisings. Libya’s instability spilled south, helping set off a protracted crisis in the Sahel region. A fresh wave of major combat followed: the 2020 Azerbaijani-Armenian war over the Nagorno-Karabakh enclave, horrific fighting in Ethiopia’s northern Tigray region that began weeks later, the conflict prompted by the Myanmar army’s 2021 power grab and Russia’s 2022 assault on Ukraine. Add to those 2023’s devastation in Sudan and Gaza. Around the globe, more people are dying in fighting, being forced from their homes or in need of life-saving aid than in decades.

Source: [10 Conflicts to Watch in 2024](https://www.crisisgroup.org/global/10-conflicts-watch-2024)

## **Objectives**

Geospatial analytics hold tremendous potential to address complex problems facing society. In this study, you are tasked to apply spatial point patterns analysis methods to discover the spatial and spatio-temporal distribution of armed conflict in Myanmar.

## **The Data**

### **Armed conflict data**

For the purpose of this assignment, armed conflict data of Myanmar between 2021-2024 from [Armed Conflict Location & Event Data (ACLED)](https://acleddata.com/), an independent, impartial, international non-profit organization collecting data on violent conflict and protest in all countries and territories in the world, should be used.

In terms of event types, students should focus on at least four main event types, namely: Battles, Explosion/Remote violence, Strategic developments, and Violence against civilians.

In terms of study period, students should focus on quarterly armed conflict events from January 2021 until June 2024.

### **GIS Data**

-   [Geospatial data](http://geonode.themimu.info/layers/?limit=100&offset=0) on [Myanmar Information Management Unit, MIMU](http://www.themimu.info/)

## **The Task**

The specific tasks of this take-home exercise are as follows:

-   Using appropriate function of **sf** and **tidyverse** packages, import and transform the downloaded armed conflict data and administrative boundary data into sf tibble data.frames.

-   Using the geospatial data sets prepared, derive quarterly KDE layers.

-   Using the geospatial data sets prepared, perform 2nd-Order Spatial Point Patterns Analysis.

-   Using the geospatial data sets prepared, derive quarterly spatio-temporal KDE layers.

-   Using the geospatial data sets prepared, perform 2nd-Order Spatio-temporal Point Patterns Analysis.

-   Using appropriate **tmap** functions, display the KDE and Spatio-temporal KDE layers on openstreetmap of Myanmar.

-   Describe the spatial patterns revealed by the KDE and Spatio-temporal KDE maps.

ACLED snapshot date: September 16 2024

ACLED Data Columns

| Field Name       | Description                                                                                                                                                    |
|-----------------------------------|-------------------------------------|
| ISO              | A numeric code for each individual country                                                                                                                     |
| EVENT_ID_CNTY    | An individual event identifier by number and country acronym                                                                                                   |
| EVENT_ID_NO_CNTY | An individual event numeric identifier                                                                                                                         |
| EVENT_DATE       | Recorded as Day / Month / Year                                                                                                                                 |
| YEAR             | The year in which an event took place                                                                                                                          |
| TIME_PRECISION   | A numeric code indicating the level of certainty of the date coded for the event (1-3)                                                                         |
| EVENT_TYPE       | The type of event                                                                                                                                              |
| SUB_EVENT_TYPE   | The type of sub-event                                                                                                                                          |
| ACTOR1           | A named actor involved in the event                                                                                                                            |
| ASSOC_ACTOR_1    | The named actor associated with or identifying with ACTOR1 in one specific event                                                                               |
| INTER1           | A numeric code indicating the type of ACTOR1                                                                                                                   |
| ACTOR2           | The named actor involved in the event. If a dyadic event, there will also be an "Actor 1"                                                                      |
| ASSOC_ACTOR_2    | The named actor associated with or identifying with ACTOR2 in one specific event                                                                               |
| INTER2           | A numeric code indicating the type of ACTOR2                                                                                                                   |
| INTERACTION      | A numeric code indicating the interaction between types of ACTOR1 and ACTOR2. Coded as an interaction between actor types, and recorded as lowest joint number |
| REGION           | The region of the world where the event took place                                                                                                             |
| COUNTRY          | The country in which the event took place                                                                                                                      |
| ADMIN1           | The largest sub-national administrative region in which the event took place                                                                                   |
| ADMIN2           | The second largest sub-national administrative region in which the event took place                                                                            |
| ADMIN3           | The third largest sub-national administrative region in which the event took place                                                                             |
| LOCATION         | The location in which the event took place                                                                                                                     |
| LATITUDE         | The latitude of the location                                                                                                                                   |
| LONGITUDE        | The longitude of the location                                                                                                                                  |
| GEO_PRECISION    | A numeric code indicating the level of certainty of the location coded for the event                                                                           |
| SOURCE           | The source(s) used to code the event                                                                                                                           |
| SOURCE SCALE     | The geographic scale of the sources used to code the event                                                                                                     |
| NOTES            | A short description of the event                                                                                                                               |
| FATALITIES       | Number or estimate of fatalities due to event. These are frequently different across reports                                                                   |

## Importing Data and Data Wrangling and Cleanup

```{r}
pacman::p_load(sf, raster, spatstat, tmap, tidyverse)
```

```{r}
conflict_data <- read_csv("data/2021-01-01-2024-06-30-Myanmar.csv")
```

```{r}
# Import the CSV file
conflict_data <- read_csv("data/2021-01-01-2024-06-30-Myanmar.csv")

```

```{r}
# Transform the data into an sf tibble data frame


#EPSG:4144 for Kalianpur 1937 Myanmar (Burma) - Moattama area. , accuracy 5.0 m, #code 1533 (default) [3]

conflict_data_sf <- conflict_data %>%
  st_as_sf(coords = c("longitude", "latitude"), crs = 4326)%>%
  st_transform(crs = 4144)
```

```{r}
conflict_data_sf
```

# 

```{r}
tmap_mode("plot")
qtm(conflict_data_sf, 
    fill = "fatalities")
```

```{r}


# Correspond to country column in acled data
adm0 = st_read(dsn = "data/adm0", 
                  layer = "mmr_polbnda_adm0_250k_mimu_1")

# Correspond to admin1 column in acled data
adm1 = st_read(dsn = "data/adm1", 
                  layer = "mmr_polbnda_adm1_250k_mimu_1")

# Correspond to admin2 column in acled data
adm2 = st_read(dsn = "data/adm2", 
                  layer = "mmr_polbnda_adm2_250k_mimu")

# Correspond to admin3 column in acled data
adm3 = st_read(dsn = "data/adm3", 
                  layer = "mmr_polbnda_adm3_250k_mimu_1")
```

```{r}

# Extract the shapeName column
shape_names <- adm1$ST

# To get unique shape names (if there are duplicates)
unique_shape_names <- unique(shape_names)
print(unique_shape_names)

# Unique admin1 list from acled file
unique_admin1 <- unique(conflict_data_sf$admin1)
print(unique_admin1)
```

-   Number of unique entries:

    -   First list: 18 entries

    -   Second list: 15 entries

```{=html}
<!-- -->
```
-   Differences in representation:

    a\) Shan region:

    -   First list: Split into "Shan-North", "Shan-South", and "Shan-East"

    -   Second list: Consolidated as just "Shan"

     b) Bago region:

    -   First list: Split into "Bago-East" and "Bago-West"

    -   Second list: Consolidated as just "Bago"

```{=html}
<!-- -->
```
-   Consistent entries (appear in both lists): "Ayeyarwady", "Chin", "Kachin", "Kayah", "Kayin", "Magway", "Mandalay", "Mon", "Nay Pyi Taw", "Rakhine", "Sagaing", "Tanintharyi", "Yangon"

acled splits Bago into east and west and shan to north,south and east. \
however, the shapefile doesnt.\
For the sake of consistency, we will change the column in acled from bago east west to bago. and shan north, south and east to Shan

```{r}
adm1
```

```{r}
qtm(adm1)
```

```{r}
# Combine Bago-West and Bago-East to Bago, and Shan-North, Shan-East, Shan-South to Shan
conflict_data_sf <- conflict_data_sf %>%
  mutate(admin1 = case_when(
    admin1 %in% c("Bago-West", "Bago-East") ~ "Bago",
    admin1 %in% c("Shan-North", "Shan-East", "Shan-South") ~ "Shan",
    TRUE ~ admin1
  ))

# Check the results
conflict_data_sf %>% 
  count(admin1) %>% 
  arrange(desc(n))
```
